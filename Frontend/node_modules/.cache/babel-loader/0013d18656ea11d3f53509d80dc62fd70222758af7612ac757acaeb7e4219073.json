{"ast":null,"code":"import React from'react';import{useState,useMemo,useEffect}from'react';import{Route,Routes}from'react-router-dom';import{productService,cartService,wishlistService,orderService}from'../Api/services.js';import Swal from'sweetalert2';import{useNavigate}from'react-router-dom';import Header from'./Header';import Home from'./Home';import Productdetail from'./ProductCard/Productdetail';import Wishlist from'./Wishlist';import Cart from'./Cart';import Login from'./Profile/Login';import Forgotpassword from'./Profile/Forgotpassword';import ChangePassword from'./Profile/ChangePassword';import Profile from'./Profile/Profile';import Regester from'./Profile/Regester';import ResetPassword from'./Profile/ResetPassword';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class ErrorBoundary extends React.Component{constructor(props){super(props);this.state={hasError:false,error:null,errorInfo:null};}static getDerivedStateFromError(error){return{hasError:true,error};}componentDidCatch(error,errorInfo){console.error('‚ùå Error caught by boundary:',error);console.error('Error Info:',errorInfo);this.setState({errorInfo});}render(){if(this.state.hasError){var _this$state$error,_this$state$error2;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',minHeight:'60vh',background:'#fef2f2',padding:'40px 20px',textAlign:'center',borderRadius:'12px',margin:'20px',border:'2px solid #fecaca'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:'#dc2626',marginBottom:'10px',fontSize:'24px',margin:'0 0 15px 0'},children:\"\\u26A0\\uFE0F Something Went Wrong\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#991b1b',marginBottom:'20px',fontSize:'14px'},children:((_this$state$error=this.state.error)===null||_this$state$error===void 0?void 0:_this$state$error.message)||'An unexpected error occurred'}),/*#__PURE__*/_jsxs(\"details\",{style:{marginBottom:'20px',textAlign:'left',fontSize:'12px',color:'#7f1d1d'},children:[/*#__PURE__*/_jsx(\"summary\",{style:{cursor:'pointer',fontWeight:'bold'},children:\"Error Details\"}),/*#__PURE__*/_jsx(\"pre\",{style:{background:'#fee2e2',padding:'10px',borderRadius:'4px',overflow:'auto'},children:(_this$state$error2=this.state.error)===null||_this$state$error2===void 0?void 0:_this$state$error2.stack})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),style:{background:'#dc2626',color:'white',padding:'10px 20px',border:'none',borderRadius:'5px',cursor:'pointer',fontSize:'16px',fontWeight:'600'},children:\"\\uD83D\\uDD04 Reload Page\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.history.back(),style:{background:'#6b7280',color:'white',padding:'10px 20px',border:'none',borderRadius:'5px',cursor:'pointer',fontSize:'16px',fontWeight:'600'},children:\"\\u2B05\\uFE0F Go Back\"})]})]});}return this.props.children;}}const User=()=>{const navigate=useNavigate();const[searchQuery,setSearchQuery]=useState('');const[currentUser,setCurrentUser]=useState(null);const[cart,setCart]=useState([]);const[wishlist,setWishlist]=useState([]);const[products,setProducts]=useState([]);const[showCart,setShowCart]=useState(false);const[loading,setLoading]=useState(true);const[filters,setFilters]=useState({category:'all',priceRange:[0,5000],rating:0});console.log('‚úÖ User component mounted');// ‚úÖ Load user from localStorage on mount\nuseEffect(()=>{console.log('üîç Loading user from localStorage...');try{const token=localStorage.getItem('token');const user=localStorage.getItem('user');if(token&&user){const parsedUser=JSON.parse(user);console.log('‚úÖ User loaded:',parsedUser.name);setCurrentUser(parsedUser);}else{console.log('‚ÑπÔ∏è No user logged in');}}catch(error){console.error('‚ùå Error parsing user:',error);localStorage.removeItem('token');localStorage.removeItem('user');}setLoading(false);},[]);// ‚úÖ Load products from backend\nuseEffect(()=>{console.log('üîç Loading products...');loadProducts();},[filters,searchQuery]);// ‚úÖ Load cart and wishlist when user logs in\nuseEffect(()=>{if(currentUser){console.log('üîç User logged in, loading cart and wishlist...');loadCart();loadWishlist();}},[currentUser]);// ‚úÖ Load Products Function\nconst loadProducts=async()=>{try{console.log('üì° Fetching products...');const response=await productService.getAll({category:filters.category!=='all'?filters.category:undefined,minPrice:filters.priceRange[0],maxPrice:filters.priceRange[1],minRating:filters.rating,search:searchQuery});const productsData=response.data.products||[];console.log('‚úÖ Products loaded:',productsData.length);setProducts(productsData);}catch(error){console.error('‚ùå Error loading products:',error);Swal.fire({title:'Error',text:'Failed to load products. Please check if backend is running on port 5000',icon:'error',toast:true,position:'top-end',timer:3000,showConfirmButton:false});setProducts([]);}};// ‚úÖ Load Cart Function - FIXED\nconst loadCart=async()=>{if(!currentUser){console.log('‚ÑπÔ∏è No user, skipping cart load');return;}try{var _response$data,_response$data$data,_response$data$data$c;console.log('üì° Fetching cart...');const response=await cartService.getCart();console.log('üì¶ Full Cart Response:',response);// ‚úÖ FIX: Correct path is response.data.data.cart.items\nconst cartItems=((_response$data=response.data)===null||_response$data===void 0?void 0:(_response$data$data=_response$data.data)===null||_response$data$data===void 0?void 0:(_response$data$data$c=_response$data$data.cart)===null||_response$data$data$c===void 0?void 0:_response$data$data$c.items)||[];console.log('‚úÖ Cart loaded:',cartItems.length,'items');console.log('üìã Cart items data:',cartItems);setCart(Array.isArray(cartItems)?cartItems:[]);}catch(error){console.error('‚ùå Error loading cart:',error);setCart([]);}};// ‚úÖ Load Wishlist Function\nconst loadWishlist=async()=>{if(!currentUser){console.log('‚ÑπÔ∏è No user, skipping wishlist load');return;}try{var _response$data$wishli;console.log('üì° Fetching wishlist...');const response=await wishlistService.getWishlist();const wishlistItems=((_response$data$wishli=response.data.wishlist)===null||_response$data$wishli===void 0?void 0:_response$data$wishli.products)||[];console.log('‚úÖ Wishlist loaded:',wishlistItems.length,'items');setWishlist(wishlistItems);}catch(error){console.error('‚ùå Error loading wishlist:',error);setWishlist([]);}};// Total cart item count\nconst cartCount=cart.reduce((total,item)=>total+(item.quantity||1),0);const wishlistCount=wishlist.length;// Filter products (client-side for immediate response)\nconst filteredProducts=useMemo(()=>{return products.filter(product=>{const matchesSearch=product.name.toLowerCase().includes(searchQuery.toLowerCase());const matchesCategory=filters.category==='all'||product.category===filters.category;const matchesPrice=product.price>=filters.priceRange[0]&&product.price<=filters.priceRange[1];const matchesRating=product.rating>=filters.rating;return matchesSearch&&matchesCategory&&matchesPrice&&matchesRating;});},[products,searchQuery,filters]);// ‚úÖ FIXED: Add to cart with proper error handling\nconst handleAddToCart=async function(product){let showNotification=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;console.log('========== ADD TO CART DEBUG START ==========');console.log('Product object received:',product);console.log('Product keys:',Object.keys(product));if(!currentUser){const result=await Swal.fire({title:'Please Login',text:'You must login to add items to cart.',icon:'warning',confirmButtonColor:'#6366f1',confirmButtonText:'Go to Login',showCancelButton:true});if(result.isConfirmed){navigate('/user/login');}return;}try{// ‚úÖ CRITICAL FIX: Extract productId from product object\nconst productId=product._id||product.id;const quantity=product.quantity||1;console.log('üì¶ Extracted values:');console.log('  productId:',productId,'type:',typeof productId);console.log('  quantity:',quantity,'type:',typeof quantity);console.log('  productName:',product.name);if(!productId){console.error('‚ùå productId is falsy:',productId);throw new Error('Invalid product ID');}console.log('üõí Calling cartService.addToCart with:');console.log('  Parameters: (productId:',productId,', quantity:',quantity,')');// ‚úÖ FIXED: Pass productId and quantity as separate parameters\nconst response=await cartService.addToCart(productId,quantity);console.log('‚úÖ Add to cart success response:',response.data);await loadCart();if(showNotification){Swal.fire({title:'Added to Cart!',text:\"\".concat(product.name,\" has been added to your cart\"),icon:'success',timer:1500,showConfirmButton:false,toast:true,position:'top-end'});}console.log('========== ADD TO CART DEBUG END (SUCCESS) ==========\\n');}catch(error){var _error$response,_error$response2,_error$response3,_error$response4,_error$response5,_error$response5$data;console.error('‚ùå Error adding to cart:',error);console.log('Error details:',{message:error.message,customMessage:error.customMessage,status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,statusText:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.statusText,responseData:(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data});if((_error$response4=error.response)!==null&&_error$response4!==void 0&&_error$response4.data){console.error('‚ùå Backend error response:',JSON.stringify(error.response.data,null,2));}Swal.fire({title:'Error',text:error.customMessage||((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'Failed to add to cart',icon:'error',toast:true,position:'top-end',timer:2000,showConfirmButton:false});console.log('========== ADD TO CART DEBUG END (ERROR) ==========\\n');}};// ‚úÖ Increase Quantity\nconst handleIncreaseQuantity=async productId=>{try{const item=cart.find(i=>i.product._id===productId||i.product.id===productId);if(!item)return;console.log('‚¨ÜÔ∏è Increasing quantity for:',productId);await cartService.updateCart(productId,item.quantity+1);await loadCart();}catch(error){console.error('‚ùå Error updating quantity:',error);}};// ‚úÖ Decrease Quantity\nconst handleDecreaseQuantity=async productId=>{try{const item=cart.find(i=>i.product._id===productId||i.product.id===productId);if(!item)return;console.log('‚¨áÔ∏è Decreasing quantity for:',productId);if(item.quantity>1){await cartService.updateCart(productId,item.quantity-1);}else{await cartService.removeFromCart(productId);}await loadCart();}catch(error){console.error('‚ùå Error updating quantity:',error);}};// ‚úÖ Remove from Cart\nconst handleRemoveFromCart=async productId=>{try{console.log('üóëÔ∏è Removing from cart:',productId);await cartService.removeFromCart(productId);await loadCart();Swal.fire({title:'Removed from Cart',icon:'info',timer:1500,showConfirmButton:false,toast:true,position:'top-end'});}catch(error){console.error('‚ùå Error removing from cart:',error);}};// ‚úÖ Toggle Wishlist\nconst handleToggleWishlist=async product=>{if(!currentUser){const result=await Swal.fire({title:'Please Login',text:'You must login to use wishlist.',icon:'warning',confirmButtonColor:'#6366f1',confirmButtonText:'Go to Login',showCancelButton:true});if(result.isConfirmed){navigate('/user/login');}return;}try{const productId=product._id||product.id;const wasInWishlist=wishlist.some(item=>(item._id||item.id)===productId);console.log('‚ù§Ô∏è Toggling wishlist for:',productId);await wishlistService.toggleWishlist(productId);await loadWishlist();const isNowInWishlist=!wasInWishlist;Swal.fire({title:isNowInWishlist?'Added to Wishlist!':'Removed from Wishlist!',text:\"\".concat(product.name,\" has been \").concat(isNowInWishlist?'added to':'removed from',\" your wishlist.\"),icon:isNowInWishlist?'success':'info',timer:1500,showConfirmButton:false,toast:true,position:'top-end'});}catch(error){var _error$response6,_error$response6$data;console.error('‚ùå Error toggling wishlist:',error);Swal.fire({title:'Error',text:((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||'Failed to update wishlist',icon:'error',toast:true,position:'top-end',timer:2000,showConfirmButton:false});}};// ‚úÖ Check if wishlisted\nconst isWishlisted=id=>{return wishlist.some(item=>(item._id||item.id)===id);};// ‚úÖ FIXED CHECKOUT - Receives orderPayload from Cart component\nconst handleCheckout=async orderPayload=>{console.log('========== USER.JS handleCheckout START ==========');console.log('Received payload from Cart:',JSON.stringify(orderPayload,null,2));// ‚úÖ Check if payload has cartItems (new field name)\nif(!orderPayload||!orderPayload.cartItems||orderPayload.cartItems.length===0){console.error('‚ùå No cartItems in payload!');Swal.fire({title:'Error',text:'No items to checkout',icon:'error',confirmButtonColor:'#ef4444'});return;}if(!currentUser){const result=await Swal.fire({title:'Please Login',text:'You must login to complete your purchase.',icon:'warning',confirmButtonColor:'#6366f1',confirmButtonText:'Go to Login',showCancelButton:true});if(result.isConfirmed){navigate('/user/login');}return;}try{var _response$data$data2;console.log('üí≥ Processing order...');// ‚úÖ Use cartItems from payload (as structured by Cart.js)\nconst cartItems=orderPayload.cartItems;const totalAmount=orderPayload.totalAmount||0;console.log('üì¶ Items to send:',cartItems.length,'items');console.log('üí∞ Total amount:',totalAmount);// ‚úÖ Build exact payload structure backend expects\nconst finalOrderData={cartItems:cartItems,// ‚úÖ CRITICAL: Use 'cartItems'\ntotalAmount:totalAmount,paymentMethod:orderPayload.paymentMethod||'cash on delivery',shippingAddress:orderPayload.shippingAddress,// ‚úÖ Already has correct structure\npaymentIntentId:orderPayload.paymentIntentId||null};console.log('üì§ Sending to backend:',JSON.stringify(finalOrderData,null,2));// ‚úÖ Call orderService to create order\n// This calls POST /api/payment/create-order\nconst response=await orderService.create(finalOrderData);console.log('‚úÖ Backend response:',response.data);const newOrder=((_response$data$data2=response.data.data)===null||_response$data$data2===void 0?void 0:_response$data$data2.order)||response.data;console.log('‚úÖ Order created with ID:',newOrder._id);// ‚úÖ Clear the cart after successful order\ntry{await cartService.clearCart();setCart([]);}catch(err){console.warn('‚ö†Ô∏è Error clearing cart:',err);}setShowCart(false);// ‚úÖ Show success message\nconst result=await Swal.fire({title:'Order Placed Successfully! üéâ',html:\"\\n          <div style=\\\"text-align: center;\\\">\\n            <div style=\\\"font-size: 48px; margin-bottom: 20px;\\\">\\u2713\\uFE0F</div>\\n            <p style=\\\"margin: 10px 0;\\\"><strong>Order ID:</strong> <br><span style=\\\"color: #6366f1; font-weight: bold;\\\">\".concat(newOrder._id,\"</span></p>\\n            <p style=\\\"margin: 10px 0;\\\"><strong>Items:</strong> \").concat(cartItems.length,\" item\").concat(cartItems.length>1?'s':'',\"</p>\\n            <p style=\\\"margin: 10px 0;\\\"><strong>Total Amount:</strong> <br><span style=\\\"color: #10b981; font-size: 18px; font-weight: bold;\\\">\\u20B9\").concat(totalAmount.toLocaleString(),\"</span></p>\\n            <p style=\\\"margin-top: 20px; color: #6b7280; font-size: 14px;\\\">Thank you for your order!</p>\\n          </div>\\n        \"),icon:'success',confirmButtonText:'üì¶ View My Orders',confirmButtonColor:'#6366f1',showCancelButton:true,cancelButtonText:'üè† Continue Shopping',cancelButtonColor:'#10b981',allowOutsideClick:false});console.log('========== USER.JS handleCheckout END (SUCCESS) ==========\\n');// ‚úÖ Navigate based on user choice\nif(result.isConfirmed){navigate('/user/profile');}else{navigate('/user');}}catch(error){var _error$response7,_error$response8,_error$response8$data,_error$response9,_error$response0,_error$response0$data,_error$response1,_error$response1$data;console.error('‚ùå Checkout failed:',error);console.log('Error details:',{message:error.message,status:(_error$response7=error.response)===null||_error$response7===void 0?void 0:_error$response7.status,backendError:(_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.message,fullResponse:(_error$response9=error.response)===null||_error$response9===void 0?void 0:_error$response9.data});console.log('========== USER.JS handleCheckout END (ERROR) ==========\\n');// ‚úÖ Show detailed error message\nSwal.fire({title:'Order Failed ‚ùå',text:((_error$response0=error.response)===null||_error$response0===void 0?void 0:(_error$response0$data=_error$response0.data)===null||_error$response0$data===void 0?void 0:_error$response0$data.message)||error.customMessage||'Unable to place order. Please try again.',icon:'error',confirmButtonColor:'#ef4444',footer:(_error$response1=error.response)!==null&&_error$response1!==void 0&&(_error$response1$data=_error$response1.data)!==null&&_error$response1$data!==void 0&&_error$response1$data.message?\"Error: \".concat(error.response.data.message):''});}};// ‚úÖ Clear Cart\nconst handleClearCart=async()=>{if(cart.length===0){Swal.fire({title:'Cart is Empty',text:'There are no items to clear',icon:'info',timer:1500,showConfirmButton:false,toast:true,position:'top-end'});return;}const result=await Swal.fire({title:'Clear Cart?',text:'Are you sure you want to remove all items?',icon:'warning',showCancelButton:true,confirmButtonText:'Yes, clear it',cancelButtonText:'Cancel',confirmButtonColor:'#ef4444',cancelButtonColor:'#6b7280'});if(result.isConfirmed){try{console.log('üóëÔ∏è Clearing entire cart...');await cartService.clearCart();setCart([]);Swal.fire({title:'Cart Cleared',icon:'success',timer:1500,showConfirmButton:false,toast:true,position:'top-end'});}catch(error){console.error('‚ùå Error clearing cart:',error);}}};const handleSearch=query=>{console.log('üîç Searching for:',query);setSearchQuery(query);};const handleViewCart=()=>{console.log('üëÄ Opening cart...');setShowCart(true);};// ‚úÖ Login Success\nconst handleLoginSuccess=(user,token)=>{console.log('‚úÖ Login success for:',user.name);setCurrentUser(user);localStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(user));Swal.fire({title:'Welcome!',text:\"Logged in as \".concat(user.name),icon:'success',timer:2000,showConfirmButton:false,toast:true,position:'top-end'});loadCart();loadWishlist();navigate('/user');};// ‚úÖ Register Success\nconst handleRegisterSuccess=(user,token)=>{console.log('‚úÖ Registration success for:',user.name);setCurrentUser(user);localStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(user));Swal.fire({title:'Account Created!',text:\"Welcome to LUXORA, \".concat(user.name),icon:'success',timer:2000,showConfirmButton:false,toast:true,position:'top-end'});navigate('/user');};// ‚úÖ Logout\nconst handleLogout=()=>{console.log('üëã Logging out...');setCurrentUser(null);setCart([]);setWishlist([]);localStorage.removeItem('token');localStorage.removeItem('user');Swal.fire({title:'Logged Out',text:'You have been successfully logged out.',icon:'success',timer:2000,showConfirmButton:false,toast:true,position:'top-end'});navigate('/user');};// ‚úÖ Loading State\nif(loading){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',fontSize:'24px',color:'#6366f1'},children:\"\\u23F3 Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Header,{cartCount:cartCount,wishlistCount:wishlistCount,filters:filters,setFilters:setFilters,onViewCart:handleViewCart,onSearch:handleSearch,searchQuery:searchQuery,currentUser:currentUser,onLogout:handleLogout})}),showCart&&/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Cart,{cart:cart,onRemoveFromCart:handleRemoveFromCart,onIncreaseQuantity:handleIncreaseQuantity,onDecreaseQuantity:handleDecreaseQuantity,onCheckout:handleCheckout,onClearCart:handleClearCart,onClose:()=>setShowCart(false),currentUser:currentUser})}),/*#__PURE__*/_jsx(\"div\",{className:\"content-wrapper\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Home,{products:filteredProducts,filters:filters,setFilters:setFilters,onAddToCart:handleAddToCart,onToggleWishlist:handleToggleWishlist,isWishlisted:isWishlisted})})}),/*#__PURE__*/_jsx(Route,{path:\"/product/:productId\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Productdetail,{onAddToCart:handleAddToCart,onToggleWishlist:handleToggleWishlist,isWishlisted:isWishlisted})})}),/*#__PURE__*/_jsx(Route,{path:\"/wishlist\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Wishlist,{wishlist:wishlist,onAddToCart:handleAddToCart,onToggleWishlist:handleToggleWishlist,isWishlisted:isWishlisted})})}),/*#__PURE__*/_jsx(Route,{path:\"/Login\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Login,{onLoginSuccess:handleLoginSuccess})})}),/*#__PURE__*/_jsx(Route,{path:\"/Register\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Regester,{onRegisterSuccess:handleRegisterSuccess})})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:currentUser?/*#__PURE__*/_jsx(Profile,{currentUser:currentUser,onLogout:handleLogout}):/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Please login to view profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/user/login'),style:{background:'#6366f1',color:'white',padding:'10px 20px',border:'none',borderRadius:'6px',cursor:'pointer',marginTop:'20px'},children:\"Go to Login\"})]})})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Forgotpassword,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/Resetpassword/:token\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(ResetPassword,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/Change-password\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(ChangePassword,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'60px 20px',minHeight:'60vh',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'48px',margin:'0 0 10px 0',color:'#1f2937'},children:\"404\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'18px',color:'#6b7280',marginBottom:'20px'},children:\"Page not found\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/user'),style:{background:'#6366f1',color:'white',padding:'12px 24px',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'16px',fontWeight:'600'},children:\"\\uD83C\\uDFE0 Go Home\"})]})})]})})]});};export default User;","map":{"version":3,"names":["React","useState","useMemo","useEffect","Route","Routes","productService","cartService","wishlistService","orderService","Swal","useNavigate","Header","Home","Productdetail","Wishlist","Cart","Login","Forgotpassword","ChangePassword","Profile","Regester","ResetPassword","jsx","_jsx","jsxs","_jsxs","ErrorBoundary","Component","constructor","props","state","hasError","error","errorInfo","getDerivedStateFromError","componentDidCatch","console","setState","render","_this$state$error","_this$state$error2","style","display","flexDirection","alignItems","justifyContent","minHeight","background","padding","textAlign","borderRadius","margin","border","children","color","marginBottom","fontSize","message","cursor","fontWeight","overflow","stack","gap","onClick","window","location","reload","history","back","User","navigate","searchQuery","setSearchQuery","currentUser","setCurrentUser","cart","setCart","wishlist","setWishlist","products","setProducts","showCart","setShowCart","loading","setLoading","filters","setFilters","category","priceRange","rating","log","token","localStorage","getItem","user","parsedUser","JSON","parse","name","removeItem","loadProducts","loadCart","loadWishlist","response","getAll","undefined","minPrice","maxPrice","minRating","search","productsData","data","length","fire","title","text","icon","toast","position","timer","showConfirmButton","_response$data","_response$data$data","_response$data$data$c","getCart","cartItems","items","Array","isArray","_response$data$wishli","getWishlist","wishlistItems","cartCount","reduce","total","item","quantity","wishlistCount","filteredProducts","filter","product","matchesSearch","toLowerCase","includes","matchesCategory","matchesPrice","price","matchesRating","handleAddToCart","showNotification","arguments","Object","keys","result","confirmButtonColor","confirmButtonText","showCancelButton","isConfirmed","productId","_id","id","Error","addToCart","concat","_error$response","_error$response2","_error$response3","_error$response4","_error$response5","_error$response5$data","customMessage","status","statusText","responseData","stringify","handleIncreaseQuantity","find","i","updateCart","handleDecreaseQuantity","removeFromCart","handleRemoveFromCart","handleToggleWishlist","wasInWishlist","some","toggleWishlist","isNowInWishlist","_error$response6","_error$response6$data","isWishlisted","handleCheckout","orderPayload","_response$data$data2","totalAmount","finalOrderData","paymentMethod","shippingAddress","paymentIntentId","create","newOrder","order","clearCart","err","warn","html","toLocaleString","cancelButtonText","cancelButtonColor","allowOutsideClick","_error$response7","_error$response8","_error$response8$data","_error$response9","_error$response0","_error$response0$data","_error$response1","_error$response1$data","backendError","fullResponse","footer","handleClearCart","handleSearch","query","handleViewCart","handleLoginSuccess","setItem","handleRegisterSuccess","handleLogout","height","className","onViewCart","onSearch","onLogout","onRemoveFromCart","onIncreaseQuantity","onDecreaseQuantity","onCheckout","onClearCart","onClose","path","element","onAddToCart","onToggleWishlist","onLoginSuccess","onRegisterSuccess","marginTop"],"sources":["D:/Projects/luxora/luxora/Frontend/src/User/User.js"],"sourcesContent":["import React from 'react'\r\nimport { useState, useMemo, useEffect } from 'react';\r\nimport { Route, Routes } from 'react-router-dom';\r\nimport { productService, cartService, wishlistService, orderService } from '../Api/services.js'\r\nimport Swal from 'sweetalert2';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport Home from './Home';\r\nimport Productdetail from './ProductCard/Productdetail';\r\nimport Wishlist from './Wishlist';\r\nimport Cart from './Cart';\r\nimport Login from './Profile/Login';\r\nimport Forgotpassword from './Profile/Forgotpassword';\r\nimport ChangePassword from './Profile/ChangePassword';\r\nimport Profile from './Profile/Profile';\r\nimport Regester from './Profile/Regester';\r\nimport ResetPassword from './Profile/ResetPassword';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false, error: null, errorInfo: null };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    console.error('‚ùå Error caught by boundary:', error);\r\n    console.error('Error Info:', errorInfo);\r\n    this.setState({ errorInfo });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          minHeight: '60vh',\r\n          background: '#fef2f2',\r\n          padding: '40px 20px',\r\n          textAlign: 'center',\r\n          borderRadius: '12px',\r\n          margin: '20px',\r\n          border: '2px solid #fecaca'\r\n        }}>\r\n          <h1 style={{ color: '#dc2626', marginBottom: '10px', fontSize: '24px', margin: '0 0 15px 0' }}>\r\n            ‚ö†Ô∏è Something Went Wrong\r\n          </h1>\r\n          <p style={{ color: '#991b1b', marginBottom: '20px', fontSize: '14px' }}>\r\n            {this.state.error?.message || 'An unexpected error occurred'}\r\n          </p>\r\n          <details style={{ marginBottom: '20px', textAlign: 'left', fontSize: '12px', color: '#7f1d1d' }}>\r\n            <summary style={{ cursor: 'pointer', fontWeight: 'bold' }}>Error Details</summary>\r\n            <pre style={{ background: '#fee2e2', padding: '10px', borderRadius: '4px', overflow: 'auto' }}>\r\n              {this.state.error?.stack}\r\n            </pre>\r\n          </details>\r\n          <div style={{ display: 'flex', gap: '10px' }}>\r\n            <button\r\n              onClick={() => window.location.reload()}\r\n              style={{\r\n                background: '#dc2626',\r\n                color: 'white',\r\n                padding: '10px 20px',\r\n                border: 'none',\r\n                borderRadius: '5px',\r\n                cursor: 'pointer',\r\n                fontSize: '16px',\r\n                fontWeight: '600'\r\n              }}\r\n            >\r\n              üîÑ Reload Page\r\n            </button>\r\n            <button\r\n              onClick={() => window.history.back()}\r\n              style={{\r\n                background: '#6b7280',\r\n                color: 'white',\r\n                padding: '10px 20px',\r\n                border: 'none',\r\n                borderRadius: '5px',\r\n                cursor: 'pointer',\r\n                fontSize: '16px',\r\n                fontWeight: '600'\r\n              }}\r\n            >\r\n              ‚¨ÖÔ∏è Go Back\r\n            </button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nconst User = () => {\r\n  const navigate = useNavigate();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [cart, setCart] = useState([]);\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [showCart, setShowCart] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({\r\n    category: 'all',\r\n    priceRange: [0, 5000],\r\n    rating: 0,\r\n  });\r\n\r\n  console.log('‚úÖ User component mounted');\r\n\r\n  // ‚úÖ Load user from localStorage on mount\r\n  useEffect(() => {\r\n    console.log('üîç Loading user from localStorage...');\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const user = localStorage.getItem('user');\r\n      \r\n      if (token && user) {\r\n        const parsedUser = JSON.parse(user);\r\n        console.log('‚úÖ User loaded:', parsedUser.name);\r\n        setCurrentUser(parsedUser);\r\n      } else {\r\n        console.log('‚ÑπÔ∏è No user logged in');\r\n      }\r\n    } catch (error) {\r\n      console.error('‚ùå Error parsing user:', error);\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  // ‚úÖ Load products from backend\r\n  useEffect(() => {\r\n    console.log('üîç Loading products...');\r\n    loadProducts();\r\n  }, [filters, searchQuery]);\r\n\r\n  // ‚úÖ Load cart and wishlist when user logs in\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      console.log('üîç User logged in, loading cart and wishlist...');\r\n      loadCart();\r\n      loadWishlist();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // ‚úÖ Load Products Function\r\n  const loadProducts = async () => {\r\n    try {\r\n      console.log('üì° Fetching products...');\r\n      const response = await productService.getAll({\r\n        category: filters.category !== 'all' ? filters.category : undefined,\r\n        minPrice: filters.priceRange[0],\r\n        maxPrice: filters.priceRange[1],\r\n        minRating: filters.rating,\r\n        search: searchQuery\r\n      });\r\n      \r\n      const productsData = response.data.products || [];\r\n      console.log('‚úÖ Products loaded:', productsData.length);\r\n      setProducts(productsData);\r\n    } catch (error) {\r\n      console.error('‚ùå Error loading products:', error);\r\n      Swal.fire({\r\n        title: 'Error',\r\n        text: 'Failed to load products. Please check if backend is running on port 5000',\r\n        icon: 'error',\r\n        toast: true,\r\n        position: 'top-end',\r\n        timer: 3000,\r\n        showConfirmButton: false\r\n      });\r\n      setProducts([]);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Load Cart Function - FIXED\r\n  const loadCart = async () => {\r\n    if (!currentUser) {\r\n      console.log('‚ÑπÔ∏è No user, skipping cart load');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log('üì° Fetching cart...');\r\n      const response = await cartService.getCart();\r\n      \r\n      console.log('üì¶ Full Cart Response:', response);\r\n      \r\n      // ‚úÖ FIX: Correct path is response.data.data.cart.items\r\n      const cartItems = response.data?.data?.cart?.items || [];\r\n      \r\n      console.log('‚úÖ Cart loaded:', cartItems.length, 'items');\r\n      console.log('üìã Cart items data:', cartItems);\r\n      \r\n      setCart(Array.isArray(cartItems) ? cartItems : []);\r\n    } catch (error) {\r\n      console.error('‚ùå Error loading cart:', error);\r\n      setCart([]);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Load Wishlist Function\r\n  const loadWishlist = async () => {\r\n    if (!currentUser) {\r\n      console.log('‚ÑπÔ∏è No user, skipping wishlist load');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log('üì° Fetching wishlist...');\r\n      const response = await wishlistService.getWishlist();\r\n      const wishlistItems = response.data.wishlist?.products || [];\r\n      console.log('‚úÖ Wishlist loaded:', wishlistItems.length, 'items');\r\n      setWishlist(wishlistItems);\r\n    } catch (error) {\r\n      console.error('‚ùå Error loading wishlist:', error);\r\n      setWishlist([]);\r\n    }\r\n  };\r\n\r\n  // Total cart item count\r\n  const cartCount = cart.reduce((total, item) => total + (item.quantity || 1), 0);\r\n  const wishlistCount = wishlist.length;\r\n\r\n  // Filter products (client-side for immediate response)\r\n  const filteredProducts = useMemo(() => {\r\n    return products.filter((product) => {\r\n      const matchesSearch = product.name\r\n        .toLowerCase()\r\n        .includes(searchQuery.toLowerCase());\r\n      const matchesCategory =\r\n        filters.category === 'all' || product.category === filters.category;\r\n      const matchesPrice =\r\n        product.price >= filters.priceRange[0] &&\r\n        product.price <= filters.priceRange[1];\r\n      const matchesRating = product.rating >= filters.rating;\r\n\r\n      return matchesSearch && matchesCategory && matchesPrice && matchesRating;\r\n    });\r\n  }, [products, searchQuery, filters]);\r\n\r\n  // ‚úÖ FIXED: Add to cart with proper error handling\r\n  const handleAddToCart = async (product, showNotification = true) => {\r\n    console.log('========== ADD TO CART DEBUG START ==========');\r\n    console.log('Product object received:', product);\r\n    console.log('Product keys:', Object.keys(product));\r\n    \r\n    if (!currentUser) {\r\n      const result = await Swal.fire({\r\n        title: 'Please Login',\r\n        text: 'You must login to add items to cart.',\r\n        icon: 'warning',\r\n        confirmButtonColor: '#6366f1',\r\n        confirmButtonText: 'Go to Login',\r\n        showCancelButton: true,\r\n      });\r\n      \r\n      if (result.isConfirmed) {\r\n        navigate('/user/login');\r\n      }\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // ‚úÖ CRITICAL FIX: Extract productId from product object\r\n      const productId = product._id || product.id;\r\n      const quantity = product.quantity || 1;\r\n      \r\n      console.log('üì¶ Extracted values:');\r\n      console.log('  productId:', productId, 'type:', typeof productId);\r\n      console.log('  quantity:', quantity, 'type:', typeof quantity);\r\n      console.log('  productName:', product.name);\r\n      \r\n      if (!productId) {\r\n        console.error('‚ùå productId is falsy:', productId);\r\n        throw new Error('Invalid product ID');\r\n      }\r\n      \r\n      console.log('üõí Calling cartService.addToCart with:');\r\n      console.log('  Parameters: (productId:', productId, ', quantity:', quantity, ')');\r\n      \r\n      // ‚úÖ FIXED: Pass productId and quantity as separate parameters\r\n      const response = await cartService.addToCart(productId, quantity);\r\n      \r\n      console.log('‚úÖ Add to cart success response:', response.data);\r\n      \r\n      await loadCart();\r\n\r\n      if (showNotification) {\r\n        Swal.fire({\r\n          title: 'Added to Cart!',\r\n          text: `${product.name} has been added to your cart`,\r\n          icon: 'success',\r\n          timer: 1500,\r\n          showConfirmButton: false,\r\n          toast: true,\r\n          position: 'top-end',\r\n        });\r\n      }\r\n      \r\n      console.log('========== ADD TO CART DEBUG END (SUCCESS) ==========\\n');\r\n      \r\n    } catch (error) {\r\n      console.error('‚ùå Error adding to cart:', error);\r\n      console.log('Error details:', {\r\n        message: error.message,\r\n        customMessage: error.customMessage,\r\n        status: error.response?.status,\r\n        statusText: error.response?.statusText,\r\n        responseData: error.response?.data,\r\n      });\r\n      \r\n      if (error.response?.data) {\r\n        console.error('‚ùå Backend error response:', JSON.stringify(error.response.data, null, 2));\r\n      }\r\n      \r\n      Swal.fire({\r\n        title: 'Error',\r\n        text: error.customMessage || error.response?.data?.message || 'Failed to add to cart',\r\n        icon: 'error',\r\n        toast: true,\r\n        position: 'top-end',\r\n        timer: 2000,\r\n        showConfirmButton: false\r\n      });\r\n      \r\n      console.log('========== ADD TO CART DEBUG END (ERROR) ==========\\n');\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Increase Quantity\r\n  const handleIncreaseQuantity = async (productId) => {\r\n    try {\r\n      const item = cart.find(i => i.product._id === productId || i.product.id === productId);\r\n      if (!item) return;\r\n\r\n      console.log('‚¨ÜÔ∏è Increasing quantity for:', productId);\r\n      await cartService.updateCart(productId, item.quantity + 1);\r\n      await loadCart();\r\n    } catch (error) {\r\n      console.error('‚ùå Error updating quantity:', error);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Decrease Quantity\r\n  const handleDecreaseQuantity = async (productId) => {\r\n    try {\r\n      const item = cart.find(i => i.product._id === productId || i.product.id === productId);\r\n      if (!item) return;\r\n\r\n      console.log('‚¨áÔ∏è Decreasing quantity for:', productId);\r\n      if (item.quantity > 1) {\r\n        await cartService.updateCart(productId, item.quantity - 1);\r\n      } else {\r\n        await cartService.removeFromCart(productId);\r\n      }\r\n      await loadCart();\r\n    } catch (error) {\r\n      console.error('‚ùå Error updating quantity:', error);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Remove from Cart\r\n  const handleRemoveFromCart = async (productId) => {\r\n    try {\r\n      console.log('üóëÔ∏è Removing from cart:', productId);\r\n      await cartService.removeFromCart(productId);\r\n      await loadCart();\r\n\r\n      Swal.fire({\r\n        title: 'Removed from Cart',\r\n        icon: 'info',\r\n        timer: 1500,\r\n        showConfirmButton: false,\r\n        toast: true,\r\n        position: 'top-end',\r\n      });\r\n    } catch (error) {\r\n      console.error('‚ùå Error removing from cart:', error);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Toggle Wishlist\r\n  const handleToggleWishlist = async (product) => {\r\n    if (!currentUser) {\r\n      const result = await Swal.fire({\r\n        title: 'Please Login',\r\n        text: 'You must login to use wishlist.',\r\n        icon: 'warning',\r\n        confirmButtonColor: '#6366f1',\r\n        confirmButtonText: 'Go to Login',\r\n        showCancelButton: true,\r\n      });\r\n      \r\n      if (result.isConfirmed) {\r\n        navigate('/user/login');\r\n      }\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const productId = product._id || product.id;\r\n      const wasInWishlist = wishlist.some(\r\n        item => (item._id || item.id) === productId\r\n      );\r\n      \r\n      console.log('‚ù§Ô∏è Toggling wishlist for:', productId);\r\n      await wishlistService.toggleWishlist(productId);\r\n      await loadWishlist();\r\n\r\n      const isNowInWishlist = !wasInWishlist;\r\n\r\n      Swal.fire({\r\n        title: isNowInWishlist ? 'Added to Wishlist!' : 'Removed from Wishlist!',\r\n        text: `${product.name} has been ${isNowInWishlist ? 'added to' : 'removed from'} your wishlist.`,\r\n        icon: isNowInWishlist ? 'success' : 'info',\r\n        timer: 1500,\r\n        showConfirmButton: false,\r\n        toast: true,\r\n        position: 'top-end',\r\n      });\r\n    } catch (error) {\r\n      console.error('‚ùå Error toggling wishlist:', error);\r\n      Swal.fire({\r\n        title: 'Error',\r\n        text: error.response?.data?.message || 'Failed to update wishlist',\r\n        icon: 'error',\r\n        toast: true,\r\n        position: 'top-end',\r\n        timer: 2000,\r\n        showConfirmButton: false\r\n      });\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Check if wishlisted\r\n  const isWishlisted = (id) => {\r\n    return wishlist.some(item => (item._id || item.id) === id);\r\n  };\r\n\r\n  // ‚úÖ FIXED CHECKOUT - Receives orderPayload from Cart component\r\n  const handleCheckout = async (orderPayload) => {\r\n    console.log('========== USER.JS handleCheckout START ==========');\r\n    console.log('Received payload from Cart:', JSON.stringify(orderPayload, null, 2));\r\n  \r\n    // ‚úÖ Check if payload has cartItems (new field name)\r\n    if (!orderPayload || !orderPayload.cartItems || orderPayload.cartItems.length === 0) {\r\n      console.error('‚ùå No cartItems in payload!');\r\n      Swal.fire({\r\n        title: 'Error',\r\n        text: 'No items to checkout',\r\n        icon: 'error',\r\n        confirmButtonColor: '#ef4444',\r\n      });\r\n      return;\r\n    }\r\n  \r\n    if (!currentUser) {\r\n      const result = await Swal.fire({\r\n        title: 'Please Login',\r\n        text: 'You must login to complete your purchase.',\r\n        icon: 'warning',\r\n        confirmButtonColor: '#6366f1',\r\n        confirmButtonText: 'Go to Login',\r\n        showCancelButton: true,\r\n      });\r\n      \r\n      if (result.isConfirmed) {\r\n        navigate('/user/login');\r\n      }\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      console.log('üí≥ Processing order...');\r\n  \r\n      // ‚úÖ Use cartItems from payload (as structured by Cart.js)\r\n      const cartItems = orderPayload.cartItems;\r\n      const totalAmount = orderPayload.totalAmount || 0;\r\n  \r\n      console.log('üì¶ Items to send:', cartItems.length, 'items');\r\n      console.log('üí∞ Total amount:', totalAmount);\r\n  \r\n      // ‚úÖ Build exact payload structure backend expects\r\n      const finalOrderData = {\r\n        cartItems: cartItems,                    // ‚úÖ CRITICAL: Use 'cartItems'\r\n        totalAmount: totalAmount,\r\n        paymentMethod: orderPayload.paymentMethod || 'cash on delivery',\r\n        shippingAddress: orderPayload.shippingAddress,  // ‚úÖ Already has correct structure\r\n        paymentIntentId: orderPayload.paymentIntentId || null\r\n      };\r\n  \r\n      console.log('üì§ Sending to backend:', JSON.stringify(finalOrderData, null, 2));\r\n  \r\n      // ‚úÖ Call orderService to create order\r\n      // This calls POST /api/payment/create-order\r\n      const response = await orderService.create(finalOrderData);\r\n      \r\n      console.log('‚úÖ Backend response:', response.data);\r\n      const newOrder = response.data.data?.order || response.data;\r\n  \r\n      console.log('‚úÖ Order created with ID:', newOrder._id);\r\n  \r\n      // ‚úÖ Clear the cart after successful order\r\n      try {\r\n        await cartService.clearCart();\r\n        setCart([]);\r\n      } catch (err) {\r\n        console.warn('‚ö†Ô∏è Error clearing cart:', err);\r\n      }\r\n  \r\n      setShowCart(false);\r\n  \r\n      // ‚úÖ Show success message\r\n      const result = await Swal.fire({\r\n        title: 'Order Placed Successfully! üéâ',\r\n        html: `\r\n          <div style=\"text-align: center;\">\r\n            <div style=\"font-size: 48px; margin-bottom: 20px;\">‚úìÔ∏è</div>\r\n            <p style=\"margin: 10px 0;\"><strong>Order ID:</strong> <br><span style=\"color: #6366f1; font-weight: bold;\">${newOrder._id}</span></p>\r\n            <p style=\"margin: 10px 0;\"><strong>Items:</strong> ${cartItems.length} item${cartItems.length > 1 ? 's' : ''}</p>\r\n            <p style=\"margin: 10px 0;\"><strong>Total Amount:</strong> <br><span style=\"color: #10b981; font-size: 18px; font-weight: bold;\">‚Çπ${totalAmount.toLocaleString()}</span></p>\r\n            <p style=\"margin-top: 20px; color: #6b7280; font-size: 14px;\">Thank you for your order!</p>\r\n          </div>\r\n        `,\r\n        icon: 'success',\r\n        confirmButtonText: 'üì¶ View My Orders',\r\n        confirmButtonColor: '#6366f1',\r\n        showCancelButton: true,\r\n        cancelButtonText: 'üè† Continue Shopping',\r\n        cancelButtonColor: '#10b981',\r\n        allowOutsideClick: false,\r\n      });\r\n  \r\n      console.log('========== USER.JS handleCheckout END (SUCCESS) ==========\\n');\r\n  \r\n      // ‚úÖ Navigate based on user choice\r\n      if (result.isConfirmed) {\r\n        navigate('/user/profile');\r\n      } else {\r\n        navigate('/user');\r\n      }\r\n  \r\n    } catch (error) {\r\n      console.error('‚ùå Checkout failed:', error);\r\n      console.log('Error details:', {\r\n        message: error.message,\r\n        status: error.response?.status,\r\n        backendError: error.response?.data?.message,\r\n        fullResponse: error.response?.data\r\n      });\r\n  \r\n      console.log('========== USER.JS handleCheckout END (ERROR) ==========\\n');\r\n  \r\n      // ‚úÖ Show detailed error message\r\n      Swal.fire({\r\n        title: 'Order Failed ‚ùå',\r\n        text: error.response?.data?.message || error.customMessage || 'Unable to place order. Please try again.',\r\n        icon: 'error',\r\n        confirmButtonColor: '#ef4444',\r\n        footer: error.response?.data?.message ? `Error: ${error.response.data.message}` : ''\r\n      });\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Clear Cart\r\n  const handleClearCart = async () => {\r\n    if (cart.length === 0) {\r\n      Swal.fire({\r\n        title: 'Cart is Empty',\r\n        text: 'There are no items to clear',\r\n        icon: 'info',\r\n        timer: 1500,\r\n        showConfirmButton: false,\r\n        toast: true,\r\n        position: 'top-end',\r\n      });\r\n      return;\r\n    }\r\n\r\n    const result = await Swal.fire({\r\n      title: 'Clear Cart?',\r\n      text: 'Are you sure you want to remove all items?',\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Yes, clear it',\r\n      cancelButtonText: 'Cancel',\r\n      confirmButtonColor: '#ef4444',\r\n      cancelButtonColor: '#6b7280',\r\n    });\r\n\r\n    if (result.isConfirmed) {\r\n      try {\r\n        console.log('üóëÔ∏è Clearing entire cart...');\r\n        await cartService.clearCart();\r\n        setCart([]);\r\n        \r\n        Swal.fire({\r\n          title: 'Cart Cleared',\r\n          icon: 'success',\r\n          timer: 1500,\r\n          showConfirmButton: false,\r\n          toast: true,\r\n          position: 'top-end',\r\n        });\r\n      } catch (error) {\r\n        console.error('‚ùå Error clearing cart:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSearch = (query) => {\r\n    console.log('üîç Searching for:', query);\r\n    setSearchQuery(query);\r\n  };\r\n\r\n  const handleViewCart = () => {\r\n    console.log('üëÄ Opening cart...');\r\n    setShowCart(true);\r\n  };\r\n\r\n  // ‚úÖ Login Success\r\n  const handleLoginSuccess = (user, token) => {\r\n    console.log('‚úÖ Login success for:', user.name);\r\n    setCurrentUser(user);\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    \r\n    Swal.fire({\r\n      title: 'Welcome!',\r\n      text: `Logged in as ${user.name}`,\r\n      icon: 'success',\r\n      timer: 2000,\r\n      showConfirmButton: false,\r\n      toast: true,\r\n      position: 'top-end',\r\n    });\r\n\r\n    loadCart();\r\n    loadWishlist();\r\n    navigate('/user');\r\n  };\r\n\r\n  // ‚úÖ Register Success\r\n  const handleRegisterSuccess = (user, token) => {\r\n    console.log('‚úÖ Registration success for:', user.name);\r\n    setCurrentUser(user);\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    \r\n    Swal.fire({\r\n      title: 'Account Created!',\r\n      text: `Welcome to LUXORA, ${user.name}`,\r\n      icon: 'success',\r\n      timer: 2000,\r\n      showConfirmButton: false,\r\n      toast: true,\r\n      position: 'top-end',\r\n    });\r\n\r\n    navigate('/user');\r\n  };\r\n\r\n  // ‚úÖ Logout\r\n  const handleLogout = () => {\r\n    console.log('üëã Logging out...');\r\n    setCurrentUser(null);\r\n    setCart([]);\r\n    setWishlist([]);\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    \r\n    Swal.fire({\r\n      title: 'Logged Out',\r\n      text: 'You have been successfully logged out.',\r\n      icon: 'success',\r\n      timer: 2000,\r\n      showConfirmButton: false,\r\n      toast: true,\r\n      position: 'top-end',\r\n    });\r\n\r\n    navigate('/user');\r\n  };\r\n\r\n  // ‚úÖ Loading State\r\n  if (loading) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        fontSize: '24px',\r\n        color: '#6366f1'\r\n      }}>\r\n        ‚è≥ Loading...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <ErrorBoundary>\r\n        <Header\r\n          cartCount={cartCount}\r\n          wishlistCount={wishlistCount}\r\n          filters={filters}\r\n          setFilters={setFilters}\r\n          onViewCart={handleViewCart}\r\n          onSearch={handleSearch}\r\n          searchQuery={searchQuery}\r\n          currentUser={currentUser}\r\n          onLogout={handleLogout}\r\n        />\r\n      </ErrorBoundary>\r\n\r\n      {showCart && (\r\n        <ErrorBoundary>\r\n          <Cart\r\n            cart={cart}\r\n            onRemoveFromCart={handleRemoveFromCart}\r\n            onIncreaseQuantity={handleIncreaseQuantity}\r\n            onDecreaseQuantity={handleDecreaseQuantity}\r\n            onCheckout={handleCheckout}\r\n            onClearCart={handleClearCart}\r\n            onClose={() => setShowCart(false)}\r\n            currentUser={currentUser}\r\n          />\r\n        </ErrorBoundary>\r\n      )}\r\n\r\n      <div className=\"content-wrapper\">\r\n        <Routes>\r\n          {/* ‚úÖ Home Route */}\r\n          <Route\r\n            path=\"/\"\r\n            element={\r\n              <ErrorBoundary>\r\n                <Home\r\n                  products={filteredProducts}\r\n                  filters={filters}\r\n                  setFilters={setFilters}\r\n                  onAddToCart={handleAddToCart}\r\n                  onToggleWishlist={handleToggleWishlist}\r\n                  isWishlisted={isWishlisted}\r\n                />\r\n              </ErrorBoundary>\r\n            }\r\n          />\r\n\r\n          {/* ‚úÖ Product Detail Route */}\r\n          <Route\r\n            path=\"/product/:productId\"\r\n            element={\r\n              <ErrorBoundary>\r\n                <Productdetail\r\n                  onAddToCart={handleAddToCart}\r\n                  onToggleWishlist={handleToggleWishlist}\r\n                  isWishlisted={isWishlisted}\r\n                />\r\n              </ErrorBoundary>\r\n            }\r\n          />\r\n\r\n          {/* ‚úÖ Wishlist Route */}\r\n          <Route\r\n            path=\"/wishlist\"\r\n            element={\r\n              <ErrorBoundary>\r\n                <Wishlist\r\n                  wishlist={wishlist}\r\n                  onAddToCart={handleAddToCart}\r\n                  onToggleWishlist={handleToggleWishlist}\r\n                  isWishlisted={isWishlisted}\r\n                />\r\n              </ErrorBoundary>\r\n            }\r\n          />\r\n\r\n          {/* ‚úÖ Login Route */}\r\n          <Route\r\n            path=\"/Login\"\r\n            element={\r\n              <ErrorBoundary>\r\n                <Login onLoginSuccess={handleLoginSuccess} />\r\n              </ErrorBoundary>\r\n            }\r\n          />\r\n\r\n          {/* ‚úÖ Register Route */}\r\n          <Route\r\n            path=\"/Register\"\r\n            element={\r\n              <ErrorBoundary>\r\n                <Regester onRegisterSuccess={handleRegisterSuccess} />\r\n              </ErrorBoundary>\r\n            }\r\n          />\r\n\r\n          {/* ‚úÖ Profile Route */}\r\n          <Route\r\n            path=\"/profile\"\r\n            element={\r\n              <ErrorBoundary>\r\n                {currentUser ? (\r\n                  <Profile currentUser={currentUser} onLogout={handleLogout} />\r\n                ) : (\r\n                  <div style={{ padding: '40px', textAlign: 'center' }}>\r\n                    <h2>Please login to view profile</h2>\r\n                    <button\r\n                      onClick={() => navigate('/user/login')}\r\n                      style={{\r\n                        background: '#6366f1',\r\n                        color: 'white',\r\n                        padding: '10px 20px',\r\n                        border: 'none',\r\n                        borderRadius: '6px',\r\n                        cursor: 'pointer',\r\n                        marginTop: '20px'\r\n                      }}\r\n                    >\r\n                      Go to Login\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </ErrorBoundary>\r\n            }\r\n          />\r\n\r\n          {/* ‚úÖ Forgot Password Route */}\r\n          <Route\r\n            path=\"/forgot-password\"\r\n            element={\r\n              <ErrorBoundary>\r\n                <Forgotpassword />\r\n              </ErrorBoundary>\r\n            }\r\n          />\r\n\r\n          {/* ‚úÖ Reset Password Route */}\r\n          <Route\r\n            path=\"/Resetpassword/:token\"\r\n            element={\r\n              <ErrorBoundary>\r\n                <ResetPassword />\r\n              </ErrorBoundary>\r\n            }\r\n          />\r\n\r\n          {/* ‚úÖ Change Password Route */}\r\n          <Route\r\n            path=\"/Change-password\"\r\n            element={\r\n              <ErrorBoundary>\r\n                <ChangePassword />\r\n              </ErrorBoundary>\r\n            }\r\n          />\r\n\r\n          {/* ‚úÖ 404 Catch-all Route */}\r\n          <Route\r\n            path=\"*\"\r\n            element={\r\n              <div style={{\r\n                textAlign: 'center',\r\n                padding: '60px 20px',\r\n                minHeight: '60vh',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n              }}>\r\n                <h1 style={{ fontSize: '48px', margin: '0 0 10px 0', color: '#1f2937' }}>404</h1>\r\n                <p style={{ fontSize: '18px', color: '#6b7280', marginBottom: '20px' }}>\r\n                  Page not found\r\n                </p>\r\n                <button\r\n                  onClick={() => navigate('/user')}\r\n                  style={{\r\n                    background: '#6366f1',\r\n                    color: 'white',\r\n                    padding: '12px 24px',\r\n                    border: 'none',\r\n                    borderRadius: '6px',\r\n                    cursor: 'pointer',\r\n                    fontSize: '16px',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                  üè† Go Home\r\n                </button>\r\n              </div>\r\n            }\r\n          />\r\n        </Routes>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default User"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,OAAO,CAAEC,SAAS,KAAQ,OAAO,CACpD,OAASC,KAAK,CAAEC,MAAM,KAAQ,kBAAkB,CAChD,OAASC,cAAc,CAAEC,WAAW,CAAEC,eAAe,CAAEC,YAAY,KAAQ,oBAAoB,CAC/F,MAAO,CAAAC,IAAI,KAAM,aAAa,CAC9B,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,CAAAC,aAAa,KAAM,6BAA6B,CACvD,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CACnC,MAAO,CAAAC,cAAc,KAAM,0BAA0B,CACrD,MAAO,CAAAC,cAAc,KAAM,0BAA0B,CACrD,MAAO,CAAAC,OAAO,KAAM,mBAAmB,CACvC,MAAO,CAAAC,QAAQ,KAAM,oBAAoB,CACzC,MAAO,CAAAC,aAAa,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,KAAM,CAAAC,aAAa,QAAS,CAAA3B,KAAK,CAAC4B,SAAU,CAC1CC,WAAWA,CAACC,KAAK,CAAE,CACjB,KAAK,CAACA,KAAK,CAAC,CACZ,IAAI,CAACC,KAAK,CAAG,CAAEC,QAAQ,CAAE,KAAK,CAAEC,KAAK,CAAE,IAAI,CAAEC,SAAS,CAAE,IAAK,CAAC,CAChE,CAEA,MAAO,CAAAC,wBAAwBA,CAACF,KAAK,CAAE,CACrC,MAAO,CAAED,QAAQ,CAAE,IAAI,CAAEC,KAAM,CAAC,CAClC,CAEAG,iBAAiBA,CAACH,KAAK,CAAEC,SAAS,CAAE,CAClCG,OAAO,CAACJ,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDI,OAAO,CAACJ,KAAK,CAAC,aAAa,CAAEC,SAAS,CAAC,CACvC,IAAI,CAACI,QAAQ,CAAC,CAAEJ,SAAU,CAAC,CAAC,CAC9B,CAEAK,MAAMA,CAAA,CAAG,CACP,GAAI,IAAI,CAACR,KAAK,CAACC,QAAQ,CAAE,KAAAQ,iBAAA,CAAAC,kBAAA,CACvB,mBACEf,KAAA,QAAKgB,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAAQ,CACxBC,SAAS,CAAE,MAAM,CACjBC,UAAU,CAAE,SAAS,CACrBC,OAAO,CAAE,WAAW,CACpBC,SAAS,CAAE,QAAQ,CACnBC,YAAY,CAAE,MAAM,CACpBC,MAAM,CAAE,MAAM,CACdC,MAAM,CAAE,mBACV,CAAE,CAAAC,QAAA,eACA9B,IAAA,OAAIkB,KAAK,CAAE,CAAEa,KAAK,CAAE,SAAS,CAAEC,YAAY,CAAE,MAAM,CAAEC,QAAQ,CAAE,MAAM,CAAEL,MAAM,CAAE,YAAa,CAAE,CAAAE,QAAA,CAAC,mCAE/F,CAAI,CAAC,cACL9B,IAAA,MAAGkB,KAAK,CAAE,CAAEa,KAAK,CAAE,SAAS,CAAEC,YAAY,CAAE,MAAM,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAAH,QAAA,CACpE,EAAAd,iBAAA,KAAI,CAACT,KAAK,CAACE,KAAK,UAAAO,iBAAA,iBAAhBA,iBAAA,CAAkBkB,OAAO,GAAI,8BAA8B,CAC3D,CAAC,cACJhC,KAAA,YAASgB,KAAK,CAAE,CAAEc,YAAY,CAAE,MAAM,CAAEN,SAAS,CAAE,MAAM,CAAEO,QAAQ,CAAE,MAAM,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAD,QAAA,eAC9F9B,IAAA,YAASkB,KAAK,CAAE,CAAEiB,MAAM,CAAE,SAAS,CAAEC,UAAU,CAAE,MAAO,CAAE,CAAAN,QAAA,CAAC,eAAa,CAAS,CAAC,cAClF9B,IAAA,QAAKkB,KAAK,CAAE,CAAEM,UAAU,CAAE,SAAS,CAAEC,OAAO,CAAE,MAAM,CAAEE,YAAY,CAAE,KAAK,CAAEU,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,EAAAb,kBAAA,CAC3F,IAAI,CAACV,KAAK,CAACE,KAAK,UAAAQ,kBAAA,iBAAhBA,kBAAA,CAAkBqB,KAAK,CACrB,CAAC,EACC,CAAC,cACVpC,KAAA,QAAKgB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEoB,GAAG,CAAE,MAAO,CAAE,CAAAT,QAAA,eAC3C9B,IAAA,WACEwC,OAAO,CAAEA,CAAA,GAAMC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAE,CACxCzB,KAAK,CAAE,CACLM,UAAU,CAAE,SAAS,CACrBO,KAAK,CAAE,OAAO,CACdN,OAAO,CAAE,WAAW,CACpBI,MAAM,CAAE,MAAM,CACdF,YAAY,CAAE,KAAK,CACnBQ,MAAM,CAAE,SAAS,CACjBF,QAAQ,CAAE,MAAM,CAChBG,UAAU,CAAE,KACd,CAAE,CAAAN,QAAA,CACH,0BAED,CAAQ,CAAC,cACT9B,IAAA,WACEwC,OAAO,CAAEA,CAAA,GAAMC,MAAM,CAACG,OAAO,CAACC,IAAI,CAAC,CAAE,CACrC3B,KAAK,CAAE,CACLM,UAAU,CAAE,SAAS,CACrBO,KAAK,CAAE,OAAO,CACdN,OAAO,CAAE,WAAW,CACpBI,MAAM,CAAE,MAAM,CACdF,YAAY,CAAE,KAAK,CACnBQ,MAAM,CAAE,SAAS,CACjBF,QAAQ,CAAE,MAAM,CAChBG,UAAU,CAAE,KACd,CAAE,CAAAN,QAAA,CACH,sBAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CAEV,CAEA,MAAO,KAAI,CAACxB,KAAK,CAACwB,QAAQ,CAC5B,CACF,CAEA,KAAM,CAAAgB,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAAAC,QAAQ,CAAG5D,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAC6D,WAAW,CAAEC,cAAc,CAAC,CAAGxE,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACyE,WAAW,CAAEC,cAAc,CAAC,CAAG1E,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAAC2E,IAAI,CAAEC,OAAO,CAAC,CAAG5E,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAC6E,QAAQ,CAAEC,WAAW,CAAC,CAAG9E,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAC+E,QAAQ,CAAEC,WAAW,CAAC,CAAGhF,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACiF,QAAQ,CAAEC,WAAW,CAAC,CAAGlF,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACmF,OAAO,CAAEC,UAAU,CAAC,CAAGpF,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACqF,OAAO,CAAEC,UAAU,CAAC,CAAGtF,QAAQ,CAAC,CACrCuF,QAAQ,CAAE,KAAK,CACfC,UAAU,CAAE,CAAC,CAAC,CAAE,IAAI,CAAC,CACrBC,MAAM,CAAE,CACV,CAAC,CAAC,CAEFrD,OAAO,CAACsD,GAAG,CAAC,0BAA0B,CAAC,CAEvC;AACAxF,SAAS,CAAC,IAAM,CACdkC,OAAO,CAACsD,GAAG,CAAC,sCAAsC,CAAC,CACnD,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,IAAI,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAEzC,GAAIF,KAAK,EAAIG,IAAI,CAAE,CACjB,KAAM,CAAAC,UAAU,CAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC,CACnC1D,OAAO,CAACsD,GAAG,CAAC,gBAAgB,CAAEK,UAAU,CAACG,IAAI,CAAC,CAC9CxB,cAAc,CAACqB,UAAU,CAAC,CAC5B,CAAC,IAAM,CACL3D,OAAO,CAACsD,GAAG,CAAC,sBAAsB,CAAC,CACrC,CACF,CAAE,MAAO1D,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7C4D,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC,CAChCP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC,CACjC,CACAf,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN;AACAlF,SAAS,CAAC,IAAM,CACdkC,OAAO,CAACsD,GAAG,CAAC,wBAAwB,CAAC,CACrCU,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACf,OAAO,CAAEd,WAAW,CAAC,CAAC,CAE1B;AACArE,SAAS,CAAC,IAAM,CACd,GAAIuE,WAAW,CAAE,CACfrC,OAAO,CAACsD,GAAG,CAAC,iDAAiD,CAAC,CAC9DW,QAAQ,CAAC,CAAC,CACVC,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAAE,CAAC7B,WAAW,CAAC,CAAC,CAEjB;AACA,KAAM,CAAA2B,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACFhE,OAAO,CAACsD,GAAG,CAAC,yBAAyB,CAAC,CACtC,KAAM,CAAAa,QAAQ,CAAG,KAAM,CAAAlG,cAAc,CAACmG,MAAM,CAAC,CAC3CjB,QAAQ,CAAEF,OAAO,CAACE,QAAQ,GAAK,KAAK,CAAGF,OAAO,CAACE,QAAQ,CAAGkB,SAAS,CACnEC,QAAQ,CAAErB,OAAO,CAACG,UAAU,CAAC,CAAC,CAAC,CAC/BmB,QAAQ,CAAEtB,OAAO,CAACG,UAAU,CAAC,CAAC,CAAC,CAC/BoB,SAAS,CAAEvB,OAAO,CAACI,MAAM,CACzBoB,MAAM,CAAEtC,WACV,CAAC,CAAC,CAEF,KAAM,CAAAuC,YAAY,CAAGP,QAAQ,CAACQ,IAAI,CAAChC,QAAQ,EAAI,EAAE,CACjD3C,OAAO,CAACsD,GAAG,CAAC,oBAAoB,CAAEoB,YAAY,CAACE,MAAM,CAAC,CACtDhC,WAAW,CAAC8B,YAAY,CAAC,CAC3B,CAAE,MAAO9E,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACjDvB,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,OAAO,CACdC,IAAI,CAAE,0EAA0E,CAChFC,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SAAS,CACnBC,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KACrB,CAAC,CAAC,CACFxC,WAAW,CAAC,EAAE,CAAC,CACjB,CACF,CAAC,CAED;AACA,KAAM,CAAAqB,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CAAC5B,WAAW,CAAE,CAChBrC,OAAO,CAACsD,GAAG,CAAC,gCAAgC,CAAC,CAC7C,OACF,CAEA,GAAI,KAAA+B,cAAA,CAAAC,mBAAA,CAAAC,qBAAA,CACFvF,OAAO,CAACsD,GAAG,CAAC,qBAAqB,CAAC,CAClC,KAAM,CAAAa,QAAQ,CAAG,KAAM,CAAAjG,WAAW,CAACsH,OAAO,CAAC,CAAC,CAE5CxF,OAAO,CAACsD,GAAG,CAAC,wBAAwB,CAAEa,QAAQ,CAAC,CAE/C;AACA,KAAM,CAAAsB,SAAS,CAAG,EAAAJ,cAAA,CAAAlB,QAAQ,CAACQ,IAAI,UAAAU,cAAA,kBAAAC,mBAAA,CAAbD,cAAA,CAAeV,IAAI,UAAAW,mBAAA,kBAAAC,qBAAA,CAAnBD,mBAAA,CAAqB/C,IAAI,UAAAgD,qBAAA,iBAAzBA,qBAAA,CAA2BG,KAAK,GAAI,EAAE,CAExD1F,OAAO,CAACsD,GAAG,CAAC,gBAAgB,CAAEmC,SAAS,CAACb,MAAM,CAAE,OAAO,CAAC,CACxD5E,OAAO,CAACsD,GAAG,CAAC,qBAAqB,CAAEmC,SAAS,CAAC,CAE7CjD,OAAO,CAACmD,KAAK,CAACC,OAAO,CAACH,SAAS,CAAC,CAAGA,SAAS,CAAG,EAAE,CAAC,CACpD,CAAE,MAAO7F,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7C4C,OAAO,CAAC,EAAE,CAAC,CACb,CACF,CAAC,CAED;AACA,KAAM,CAAA0B,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAAC7B,WAAW,CAAE,CAChBrC,OAAO,CAACsD,GAAG,CAAC,oCAAoC,CAAC,CACjD,OACF,CAEA,GAAI,KAAAuC,qBAAA,CACF7F,OAAO,CAACsD,GAAG,CAAC,yBAAyB,CAAC,CACtC,KAAM,CAAAa,QAAQ,CAAG,KAAM,CAAAhG,eAAe,CAAC2H,WAAW,CAAC,CAAC,CACpD,KAAM,CAAAC,aAAa,CAAG,EAAAF,qBAAA,CAAA1B,QAAQ,CAACQ,IAAI,CAAClC,QAAQ,UAAAoD,qBAAA,iBAAtBA,qBAAA,CAAwBlD,QAAQ,GAAI,EAAE,CAC5D3C,OAAO,CAACsD,GAAG,CAAC,oBAAoB,CAAEyC,aAAa,CAACnB,MAAM,CAAE,OAAO,CAAC,CAChElC,WAAW,CAACqD,aAAa,CAAC,CAC5B,CAAE,MAAOnG,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACjD8C,WAAW,CAAC,EAAE,CAAC,CACjB,CACF,CAAC,CAED;AACA,KAAM,CAAAsD,SAAS,CAAGzD,IAAI,CAAC0D,MAAM,CAAC,CAACC,KAAK,CAAEC,IAAI,GAAKD,KAAK,EAAIC,IAAI,CAACC,QAAQ,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CAC/E,KAAM,CAAAC,aAAa,CAAG5D,QAAQ,CAACmC,MAAM,CAErC;AACA,KAAM,CAAA0B,gBAAgB,CAAGzI,OAAO,CAAC,IAAM,CACrC,MAAO,CAAA8E,QAAQ,CAAC4D,MAAM,CAAEC,OAAO,EAAK,CAClC,KAAM,CAAAC,aAAa,CAAGD,OAAO,CAAC1C,IAAI,CAC/B4C,WAAW,CAAC,CAAC,CACbC,QAAQ,CAACxE,WAAW,CAACuE,WAAW,CAAC,CAAC,CAAC,CACtC,KAAM,CAAAE,eAAe,CACnB3D,OAAO,CAACE,QAAQ,GAAK,KAAK,EAAIqD,OAAO,CAACrD,QAAQ,GAAKF,OAAO,CAACE,QAAQ,CACrE,KAAM,CAAA0D,YAAY,CAChBL,OAAO,CAACM,KAAK,EAAI7D,OAAO,CAACG,UAAU,CAAC,CAAC,CAAC,EACtCoD,OAAO,CAACM,KAAK,EAAI7D,OAAO,CAACG,UAAU,CAAC,CAAC,CAAC,CACxC,KAAM,CAAA2D,aAAa,CAAGP,OAAO,CAACnD,MAAM,EAAIJ,OAAO,CAACI,MAAM,CAEtD,MAAO,CAAAoD,aAAa,EAAIG,eAAe,EAAIC,YAAY,EAAIE,aAAa,CAC1E,CAAC,CAAC,CACJ,CAAC,CAAE,CAACpE,QAAQ,CAAER,WAAW,CAAEc,OAAO,CAAC,CAAC,CAEpC;AACA,KAAM,CAAA+D,eAAe,CAAG,cAAAA,CAAOR,OAAO,CAA8B,IAA5B,CAAAS,gBAAgB,CAAAC,SAAA,CAAAtC,MAAA,IAAAsC,SAAA,MAAA7C,SAAA,CAAA6C,SAAA,IAAG,IAAI,CAC7DlH,OAAO,CAACsD,GAAG,CAAC,+CAA+C,CAAC,CAC5DtD,OAAO,CAACsD,GAAG,CAAC,0BAA0B,CAAEkD,OAAO,CAAC,CAChDxG,OAAO,CAACsD,GAAG,CAAC,eAAe,CAAE6D,MAAM,CAACC,IAAI,CAACZ,OAAO,CAAC,CAAC,CAElD,GAAI,CAACnE,WAAW,CAAE,CAChB,KAAM,CAAAgF,MAAM,CAAG,KAAM,CAAAhJ,IAAI,CAACwG,IAAI,CAAC,CAC7BC,KAAK,CAAE,cAAc,CACrBC,IAAI,CAAE,sCAAsC,CAC5CC,IAAI,CAAE,SAAS,CACfsC,kBAAkB,CAAE,SAAS,CAC7BC,iBAAiB,CAAE,aAAa,CAChCC,gBAAgB,CAAE,IACpB,CAAC,CAAC,CAEF,GAAIH,MAAM,CAACI,WAAW,CAAE,CACtBvF,QAAQ,CAAC,aAAa,CAAC,CACzB,CACA,OACF,CAEA,GAAI,CACF;AACA,KAAM,CAAAwF,SAAS,CAAGlB,OAAO,CAACmB,GAAG,EAAInB,OAAO,CAACoB,EAAE,CAC3C,KAAM,CAAAxB,QAAQ,CAAGI,OAAO,CAACJ,QAAQ,EAAI,CAAC,CAEtCpG,OAAO,CAACsD,GAAG,CAAC,sBAAsB,CAAC,CACnCtD,OAAO,CAACsD,GAAG,CAAC,cAAc,CAAEoE,SAAS,CAAE,OAAO,CAAE,MAAO,CAAAA,SAAS,CAAC,CACjE1H,OAAO,CAACsD,GAAG,CAAC,aAAa,CAAE8C,QAAQ,CAAE,OAAO,CAAE,MAAO,CAAAA,QAAQ,CAAC,CAC9DpG,OAAO,CAACsD,GAAG,CAAC,gBAAgB,CAAEkD,OAAO,CAAC1C,IAAI,CAAC,CAE3C,GAAI,CAAC4D,SAAS,CAAE,CACd1H,OAAO,CAACJ,KAAK,CAAC,uBAAuB,CAAE8H,SAAS,CAAC,CACjD,KAAM,IAAI,CAAAG,KAAK,CAAC,oBAAoB,CAAC,CACvC,CAEA7H,OAAO,CAACsD,GAAG,CAAC,wCAAwC,CAAC,CACrDtD,OAAO,CAACsD,GAAG,CAAC,2BAA2B,CAAEoE,SAAS,CAAE,aAAa,CAAEtB,QAAQ,CAAE,GAAG,CAAC,CAEjF;AACA,KAAM,CAAAjC,QAAQ,CAAG,KAAM,CAAAjG,WAAW,CAAC4J,SAAS,CAACJ,SAAS,CAAEtB,QAAQ,CAAC,CAEjEpG,OAAO,CAACsD,GAAG,CAAC,iCAAiC,CAAEa,QAAQ,CAACQ,IAAI,CAAC,CAE7D,KAAM,CAAAV,QAAQ,CAAC,CAAC,CAEhB,GAAIgD,gBAAgB,CAAE,CACpB5I,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,gBAAgB,CACvBC,IAAI,IAAAgD,MAAA,CAAKvB,OAAO,CAAC1C,IAAI,gCAA8B,CACnDkB,IAAI,CAAE,SAAS,CACfG,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KAAK,CACxBH,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SACZ,CAAC,CAAC,CACJ,CAEAlF,OAAO,CAACsD,GAAG,CAAC,yDAAyD,CAAC,CAExE,CAAE,MAAO1D,KAAK,CAAE,KAAAoI,eAAA,CAAAC,gBAAA,CAAAC,gBAAA,CAAAC,gBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CACdrI,OAAO,CAACJ,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CI,OAAO,CAACsD,GAAG,CAAC,gBAAgB,CAAE,CAC5BjC,OAAO,CAAEzB,KAAK,CAACyB,OAAO,CACtBiH,aAAa,CAAE1I,KAAK,CAAC0I,aAAa,CAClCC,MAAM,EAAAP,eAAA,CAAEpI,KAAK,CAACuE,QAAQ,UAAA6D,eAAA,iBAAdA,eAAA,CAAgBO,MAAM,CAC9BC,UAAU,EAAAP,gBAAA,CAAErI,KAAK,CAACuE,QAAQ,UAAA8D,gBAAA,iBAAdA,gBAAA,CAAgBO,UAAU,CACtCC,YAAY,EAAAP,gBAAA,CAAEtI,KAAK,CAACuE,QAAQ,UAAA+D,gBAAA,iBAAdA,gBAAA,CAAgBvD,IAChC,CAAC,CAAC,CAEF,IAAAwD,gBAAA,CAAIvI,KAAK,CAACuE,QAAQ,UAAAgE,gBAAA,WAAdA,gBAAA,CAAgBxD,IAAI,CAAE,CACxB3E,OAAO,CAACJ,KAAK,CAAC,2BAA2B,CAAEgE,IAAI,CAAC8E,SAAS,CAAC9I,KAAK,CAACuE,QAAQ,CAACQ,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAC1F,CAEAtG,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,OAAO,CACdC,IAAI,CAAEnF,KAAK,CAAC0I,aAAa,IAAAF,gBAAA,CAAIxI,KAAK,CAACuE,QAAQ,UAAAiE,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBzD,IAAI,UAAA0D,qBAAA,iBAApBA,qBAAA,CAAsBhH,OAAO,GAAI,uBAAuB,CACrF2D,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SAAS,CACnBC,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KACrB,CAAC,CAAC,CAEFpF,OAAO,CAACsD,GAAG,CAAC,uDAAuD,CAAC,CACtE,CACF,CAAC,CAED;AACA,KAAM,CAAAqF,sBAAsB,CAAG,KAAO,CAAAjB,SAAS,EAAK,CAClD,GAAI,CACF,KAAM,CAAAvB,IAAI,CAAG5D,IAAI,CAACqG,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACrC,OAAO,CAACmB,GAAG,GAAKD,SAAS,EAAImB,CAAC,CAACrC,OAAO,CAACoB,EAAE,GAAKF,SAAS,CAAC,CACtF,GAAI,CAACvB,IAAI,CAAE,OAEXnG,OAAO,CAACsD,GAAG,CAAC,6BAA6B,CAAEoE,SAAS,CAAC,CACrD,KAAM,CAAAxJ,WAAW,CAAC4K,UAAU,CAACpB,SAAS,CAAEvB,IAAI,CAACC,QAAQ,CAAG,CAAC,CAAC,CAC1D,KAAM,CAAAnC,QAAQ,CAAC,CAAC,CAClB,CAAE,MAAOrE,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACF,CAAC,CAED;AACA,KAAM,CAAAmJ,sBAAsB,CAAG,KAAO,CAAArB,SAAS,EAAK,CAClD,GAAI,CACF,KAAM,CAAAvB,IAAI,CAAG5D,IAAI,CAACqG,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACrC,OAAO,CAACmB,GAAG,GAAKD,SAAS,EAAImB,CAAC,CAACrC,OAAO,CAACoB,EAAE,GAAKF,SAAS,CAAC,CACtF,GAAI,CAACvB,IAAI,CAAE,OAEXnG,OAAO,CAACsD,GAAG,CAAC,6BAA6B,CAAEoE,SAAS,CAAC,CACrD,GAAIvB,IAAI,CAACC,QAAQ,CAAG,CAAC,CAAE,CACrB,KAAM,CAAAlI,WAAW,CAAC4K,UAAU,CAACpB,SAAS,CAAEvB,IAAI,CAACC,QAAQ,CAAG,CAAC,CAAC,CAC5D,CAAC,IAAM,CACL,KAAM,CAAAlI,WAAW,CAAC8K,cAAc,CAACtB,SAAS,CAAC,CAC7C,CACA,KAAM,CAAAzD,QAAQ,CAAC,CAAC,CAClB,CAAE,MAAOrE,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACF,CAAC,CAED;AACA,KAAM,CAAAqJ,oBAAoB,CAAG,KAAO,CAAAvB,SAAS,EAAK,CAChD,GAAI,CACF1H,OAAO,CAACsD,GAAG,CAAC,yBAAyB,CAAEoE,SAAS,CAAC,CACjD,KAAM,CAAAxJ,WAAW,CAAC8K,cAAc,CAACtB,SAAS,CAAC,CAC3C,KAAM,CAAAzD,QAAQ,CAAC,CAAC,CAEhB5F,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,mBAAmB,CAC1BE,IAAI,CAAE,MAAM,CACZG,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KAAK,CACxBH,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SACZ,CAAC,CAAC,CACJ,CAAE,MAAOtF,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACrD,CACF,CAAC,CAED;AACA,KAAM,CAAAsJ,oBAAoB,CAAG,KAAO,CAAA1C,OAAO,EAAK,CAC9C,GAAI,CAACnE,WAAW,CAAE,CAChB,KAAM,CAAAgF,MAAM,CAAG,KAAM,CAAAhJ,IAAI,CAACwG,IAAI,CAAC,CAC7BC,KAAK,CAAE,cAAc,CACrBC,IAAI,CAAE,iCAAiC,CACvCC,IAAI,CAAE,SAAS,CACfsC,kBAAkB,CAAE,SAAS,CAC7BC,iBAAiB,CAAE,aAAa,CAChCC,gBAAgB,CAAE,IACpB,CAAC,CAAC,CAEF,GAAIH,MAAM,CAACI,WAAW,CAAE,CACtBvF,QAAQ,CAAC,aAAa,CAAC,CACzB,CACA,OACF,CAEA,GAAI,CACF,KAAM,CAAAwF,SAAS,CAAGlB,OAAO,CAACmB,GAAG,EAAInB,OAAO,CAACoB,EAAE,CAC3C,KAAM,CAAAuB,aAAa,CAAG1G,QAAQ,CAAC2G,IAAI,CACjCjD,IAAI,EAAI,CAACA,IAAI,CAACwB,GAAG,EAAIxB,IAAI,CAACyB,EAAE,IAAMF,SACpC,CAAC,CAED1H,OAAO,CAACsD,GAAG,CAAC,2BAA2B,CAAEoE,SAAS,CAAC,CACnD,KAAM,CAAAvJ,eAAe,CAACkL,cAAc,CAAC3B,SAAS,CAAC,CAC/C,KAAM,CAAAxD,YAAY,CAAC,CAAC,CAEpB,KAAM,CAAAoF,eAAe,CAAG,CAACH,aAAa,CAEtC9K,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAEwE,eAAe,CAAG,oBAAoB,CAAG,wBAAwB,CACxEvE,IAAI,IAAAgD,MAAA,CAAKvB,OAAO,CAAC1C,IAAI,eAAAiE,MAAA,CAAauB,eAAe,CAAG,UAAU,CAAG,cAAc,mBAAiB,CAChGtE,IAAI,CAAEsE,eAAe,CAAG,SAAS,CAAG,MAAM,CAC1CnE,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KAAK,CACxBH,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SACZ,CAAC,CAAC,CACJ,CAAE,MAAOtF,KAAK,CAAE,KAAA2J,gBAAA,CAAAC,qBAAA,CACdxJ,OAAO,CAACJ,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClDvB,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,OAAO,CACdC,IAAI,CAAE,EAAAwE,gBAAA,CAAA3J,KAAK,CAACuE,QAAQ,UAAAoF,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgB5E,IAAI,UAAA6E,qBAAA,iBAApBA,qBAAA,CAAsBnI,OAAO,GAAI,2BAA2B,CAClE2D,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SAAS,CACnBC,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KACrB,CAAC,CAAC,CACJ,CACF,CAAC,CAED;AACA,KAAM,CAAAqE,YAAY,CAAI7B,EAAE,EAAK,CAC3B,MAAO,CAAAnF,QAAQ,CAAC2G,IAAI,CAACjD,IAAI,EAAI,CAACA,IAAI,CAACwB,GAAG,EAAIxB,IAAI,CAACyB,EAAE,IAAMA,EAAE,CAAC,CAC5D,CAAC,CAED;AACA,KAAM,CAAA8B,cAAc,CAAG,KAAO,CAAAC,YAAY,EAAK,CAC7C3J,OAAO,CAACsD,GAAG,CAAC,oDAAoD,CAAC,CACjEtD,OAAO,CAACsD,GAAG,CAAC,6BAA6B,CAAEM,IAAI,CAAC8E,SAAS,CAACiB,YAAY,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAEjF;AACA,GAAI,CAACA,YAAY,EAAI,CAACA,YAAY,CAAClE,SAAS,EAAIkE,YAAY,CAAClE,SAAS,CAACb,MAAM,GAAK,CAAC,CAAE,CACnF5E,OAAO,CAACJ,KAAK,CAAC,4BAA4B,CAAC,CAC3CvB,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,OAAO,CACdC,IAAI,CAAE,sBAAsB,CAC5BC,IAAI,CAAE,OAAO,CACbsC,kBAAkB,CAAE,SACtB,CAAC,CAAC,CACF,OACF,CAEA,GAAI,CAACjF,WAAW,CAAE,CAChB,KAAM,CAAAgF,MAAM,CAAG,KAAM,CAAAhJ,IAAI,CAACwG,IAAI,CAAC,CAC7BC,KAAK,CAAE,cAAc,CACrBC,IAAI,CAAE,2CAA2C,CACjDC,IAAI,CAAE,SAAS,CACfsC,kBAAkB,CAAE,SAAS,CAC7BC,iBAAiB,CAAE,aAAa,CAChCC,gBAAgB,CAAE,IACpB,CAAC,CAAC,CAEF,GAAIH,MAAM,CAACI,WAAW,CAAE,CACtBvF,QAAQ,CAAC,aAAa,CAAC,CACzB,CACA,OACF,CAEA,GAAI,KAAA0H,oBAAA,CACF5J,OAAO,CAACsD,GAAG,CAAC,wBAAwB,CAAC,CAErC;AACA,KAAM,CAAAmC,SAAS,CAAGkE,YAAY,CAAClE,SAAS,CACxC,KAAM,CAAAoE,WAAW,CAAGF,YAAY,CAACE,WAAW,EAAI,CAAC,CAEjD7J,OAAO,CAACsD,GAAG,CAAC,mBAAmB,CAAEmC,SAAS,CAACb,MAAM,CAAE,OAAO,CAAC,CAC3D5E,OAAO,CAACsD,GAAG,CAAC,kBAAkB,CAAEuG,WAAW,CAAC,CAE5C;AACA,KAAM,CAAAC,cAAc,CAAG,CACrBrE,SAAS,CAAEA,SAAS,CAAqB;AACzCoE,WAAW,CAAEA,WAAW,CACxBE,aAAa,CAAEJ,YAAY,CAACI,aAAa,EAAI,kBAAkB,CAC/DC,eAAe,CAAEL,YAAY,CAACK,eAAe,CAAG;AAChDC,eAAe,CAAEN,YAAY,CAACM,eAAe,EAAI,IACnD,CAAC,CAEDjK,OAAO,CAACsD,GAAG,CAAC,wBAAwB,CAAEM,IAAI,CAAC8E,SAAS,CAACoB,cAAc,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAE9E;AACA;AACA,KAAM,CAAA3F,QAAQ,CAAG,KAAM,CAAA/F,YAAY,CAAC8L,MAAM,CAACJ,cAAc,CAAC,CAE1D9J,OAAO,CAACsD,GAAG,CAAC,qBAAqB,CAAEa,QAAQ,CAACQ,IAAI,CAAC,CACjD,KAAM,CAAAwF,QAAQ,CAAG,EAAAP,oBAAA,CAAAzF,QAAQ,CAACQ,IAAI,CAACA,IAAI,UAAAiF,oBAAA,iBAAlBA,oBAAA,CAAoBQ,KAAK,GAAIjG,QAAQ,CAACQ,IAAI,CAE3D3E,OAAO,CAACsD,GAAG,CAAC,0BAA0B,CAAE6G,QAAQ,CAACxC,GAAG,CAAC,CAErD;AACA,GAAI,CACF,KAAM,CAAAzJ,WAAW,CAACmM,SAAS,CAAC,CAAC,CAC7B7H,OAAO,CAAC,EAAE,CAAC,CACb,CAAE,MAAO8H,GAAG,CAAE,CACZtK,OAAO,CAACuK,IAAI,CAAC,yBAAyB,CAAED,GAAG,CAAC,CAC9C,CAEAxH,WAAW,CAAC,KAAK,CAAC,CAElB;AACA,KAAM,CAAAuE,MAAM,CAAG,KAAM,CAAAhJ,IAAI,CAACwG,IAAI,CAAC,CAC7BC,KAAK,CAAE,+BAA+B,CACtC0F,IAAI,qQAAAzC,MAAA,CAG6GoC,QAAQ,CAACxC,GAAG,mFAAAI,MAAA,CACpEtC,SAAS,CAACb,MAAM,UAAAmD,MAAA,CAAQtC,SAAS,CAACb,MAAM,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,iKAAAmD,MAAA,CACuB8B,WAAW,CAACY,cAAc,CAAC,CAAC,sJAGlK,CACDzF,IAAI,CAAE,SAAS,CACfuC,iBAAiB,CAAE,mBAAmB,CACtCD,kBAAkB,CAAE,SAAS,CAC7BE,gBAAgB,CAAE,IAAI,CACtBkD,gBAAgB,CAAE,sBAAsB,CACxCC,iBAAiB,CAAE,SAAS,CAC5BC,iBAAiB,CAAE,KACrB,CAAC,CAAC,CAEF5K,OAAO,CAACsD,GAAG,CAAC,8DAA8D,CAAC,CAE3E;AACA,GAAI+D,MAAM,CAACI,WAAW,CAAE,CACtBvF,QAAQ,CAAC,eAAe,CAAC,CAC3B,CAAC,IAAM,CACLA,QAAQ,CAAC,OAAO,CAAC,CACnB,CAEF,CAAE,MAAOtC,KAAK,CAAE,KAAAiL,gBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CACdpL,OAAO,CAACJ,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1CI,OAAO,CAACsD,GAAG,CAAC,gBAAgB,CAAE,CAC5BjC,OAAO,CAAEzB,KAAK,CAACyB,OAAO,CACtBkH,MAAM,EAAAsC,gBAAA,CAAEjL,KAAK,CAACuE,QAAQ,UAAA0G,gBAAA,iBAAdA,gBAAA,CAAgBtC,MAAM,CAC9B8C,YAAY,EAAAP,gBAAA,CAAElL,KAAK,CAACuE,QAAQ,UAAA2G,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBnG,IAAI,UAAAoG,qBAAA,iBAApBA,qBAAA,CAAsB1J,OAAO,CAC3CiK,YAAY,EAAAN,gBAAA,CAAEpL,KAAK,CAACuE,QAAQ,UAAA6G,gBAAA,iBAAdA,gBAAA,CAAgBrG,IAChC,CAAC,CAAC,CAEF3E,OAAO,CAACsD,GAAG,CAAC,4DAA4D,CAAC,CAEzE;AACAjF,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,gBAAgB,CACvBC,IAAI,CAAE,EAAAkG,gBAAA,CAAArL,KAAK,CAACuE,QAAQ,UAAA8G,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBtG,IAAI,UAAAuG,qBAAA,iBAApBA,qBAAA,CAAsB7J,OAAO,GAAIzB,KAAK,CAAC0I,aAAa,EAAI,0CAA0C,CACxGtD,IAAI,CAAE,OAAO,CACbsC,kBAAkB,CAAE,SAAS,CAC7BiE,MAAM,CAAE,CAAAJ,gBAAA,CAAAvL,KAAK,CAACuE,QAAQ,UAAAgH,gBAAA,YAAAC,qBAAA,CAAdD,gBAAA,CAAgBxG,IAAI,UAAAyG,qBAAA,WAApBA,qBAAA,CAAsB/J,OAAO,WAAA0G,MAAA,CAAanI,KAAK,CAACuE,QAAQ,CAACQ,IAAI,CAACtD,OAAO,EAAK,EACpF,CAAC,CAAC,CACJ,CACF,CAAC,CAED;AACA,KAAM,CAAAmK,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAIjJ,IAAI,CAACqC,MAAM,GAAK,CAAC,CAAE,CACrBvG,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,eAAe,CACtBC,IAAI,CAAE,6BAA6B,CACnCC,IAAI,CAAE,MAAM,CACZG,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KAAK,CACxBH,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SACZ,CAAC,CAAC,CACF,OACF,CAEA,KAAM,CAAAmC,MAAM,CAAG,KAAM,CAAAhJ,IAAI,CAACwG,IAAI,CAAC,CAC7BC,KAAK,CAAE,aAAa,CACpBC,IAAI,CAAE,4CAA4C,CAClDC,IAAI,CAAE,SAAS,CACfwC,gBAAgB,CAAE,IAAI,CACtBD,iBAAiB,CAAE,eAAe,CAClCmD,gBAAgB,CAAE,QAAQ,CAC1BpD,kBAAkB,CAAE,SAAS,CAC7BqD,iBAAiB,CAAE,SACrB,CAAC,CAAC,CAEF,GAAItD,MAAM,CAACI,WAAW,CAAE,CACtB,GAAI,CACFzH,OAAO,CAACsD,GAAG,CAAC,6BAA6B,CAAC,CAC1C,KAAM,CAAApF,WAAW,CAACmM,SAAS,CAAC,CAAC,CAC7B7H,OAAO,CAAC,EAAE,CAAC,CAEXnE,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,cAAc,CACrBE,IAAI,CAAE,SAAS,CACfG,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KAAK,CACxBH,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SACZ,CAAC,CAAC,CACJ,CAAE,MAAOtF,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CACF,CAAC,CAED,KAAM,CAAA6L,YAAY,CAAIC,KAAK,EAAK,CAC9B1L,OAAO,CAACsD,GAAG,CAAC,mBAAmB,CAAEoI,KAAK,CAAC,CACvCtJ,cAAc,CAACsJ,KAAK,CAAC,CACvB,CAAC,CAED,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B3L,OAAO,CAACsD,GAAG,CAAC,oBAAoB,CAAC,CACjCR,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAED;AACA,KAAM,CAAA8I,kBAAkB,CAAGA,CAAClI,IAAI,CAAEH,KAAK,GAAK,CAC1CvD,OAAO,CAACsD,GAAG,CAAC,sBAAsB,CAAEI,IAAI,CAACI,IAAI,CAAC,CAC9CxB,cAAc,CAACoB,IAAI,CAAC,CACpBF,YAAY,CAACqI,OAAO,CAAC,OAAO,CAAEtI,KAAK,CAAC,CACpCC,YAAY,CAACqI,OAAO,CAAC,MAAM,CAAEjI,IAAI,CAAC8E,SAAS,CAAChF,IAAI,CAAC,CAAC,CAElDrF,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,UAAU,CACjBC,IAAI,iBAAAgD,MAAA,CAAkBrE,IAAI,CAACI,IAAI,CAAE,CACjCkB,IAAI,CAAE,SAAS,CACfG,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KAAK,CACxBH,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SACZ,CAAC,CAAC,CAEFjB,QAAQ,CAAC,CAAC,CACVC,YAAY,CAAC,CAAC,CACdhC,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAC,CAED;AACA,KAAM,CAAA4J,qBAAqB,CAAGA,CAACpI,IAAI,CAAEH,KAAK,GAAK,CAC7CvD,OAAO,CAACsD,GAAG,CAAC,6BAA6B,CAAEI,IAAI,CAACI,IAAI,CAAC,CACrDxB,cAAc,CAACoB,IAAI,CAAC,CACpBF,YAAY,CAACqI,OAAO,CAAC,OAAO,CAAEtI,KAAK,CAAC,CACpCC,YAAY,CAACqI,OAAO,CAAC,MAAM,CAAEjI,IAAI,CAAC8E,SAAS,CAAChF,IAAI,CAAC,CAAC,CAElDrF,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,kBAAkB,CACzBC,IAAI,uBAAAgD,MAAA,CAAwBrE,IAAI,CAACI,IAAI,CAAE,CACvCkB,IAAI,CAAE,SAAS,CACfG,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KAAK,CACxBH,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SACZ,CAAC,CAAC,CAEFhD,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAC,CAED;AACA,KAAM,CAAA6J,YAAY,CAAGA,CAAA,GAAM,CACzB/L,OAAO,CAACsD,GAAG,CAAC,mBAAmB,CAAC,CAChChB,cAAc,CAAC,IAAI,CAAC,CACpBE,OAAO,CAAC,EAAE,CAAC,CACXE,WAAW,CAAC,EAAE,CAAC,CACfc,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC,CAChCP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC,CAE/B1F,IAAI,CAACwG,IAAI,CAAC,CACRC,KAAK,CAAE,YAAY,CACnBC,IAAI,CAAE,wCAAwC,CAC9CC,IAAI,CAAE,SAAS,CACfG,KAAK,CAAE,IAAI,CACXC,iBAAiB,CAAE,KAAK,CACxBH,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,SACZ,CAAC,CAAC,CAEFhD,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAC,CAED;AACA,GAAIa,OAAO,CAAE,CACX,mBACE5D,IAAA,QAAKkB,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfG,cAAc,CAAE,QAAQ,CACxBD,UAAU,CAAE,QAAQ,CACpBwL,MAAM,CAAE,OAAO,CACf5K,QAAQ,CAAE,MAAM,CAChBF,KAAK,CAAE,SACT,CAAE,CAAAD,QAAA,CAAC,mBAEH,CAAK,CAAC,CAEV,CAEA,mBACE5B,KAAA,QAAK4M,SAAS,CAAC,eAAe,CAAAhL,QAAA,eAC5B9B,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACZ,MAAM,EACLyH,SAAS,CAAEA,SAAU,CACrBK,aAAa,CAAEA,aAAc,CAC7BpD,OAAO,CAAEA,OAAQ,CACjBC,UAAU,CAAEA,UAAW,CACvBgJ,UAAU,CAAEP,cAAe,CAC3BQ,QAAQ,CAAEV,YAAa,CACvBtJ,WAAW,CAAEA,WAAY,CACzBE,WAAW,CAAEA,WAAY,CACzB+J,QAAQ,CAAEL,YAAa,CACxB,CAAC,CACW,CAAC,CAEflJ,QAAQ,eACP1D,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACR,IAAI,EACH4D,IAAI,CAAEA,IAAK,CACX8J,gBAAgB,CAAEpD,oBAAqB,CACvCqD,kBAAkB,CAAE3D,sBAAuB,CAC3C4D,kBAAkB,CAAExD,sBAAuB,CAC3CyD,UAAU,CAAE9C,cAAe,CAC3B+C,WAAW,CAAEjB,eAAgB,CAC7BkB,OAAO,CAAEA,CAAA,GAAM5J,WAAW,CAAC,KAAK,CAAE,CAClCT,WAAW,CAAEA,WAAY,CAC1B,CAAC,CACW,CAChB,cAEDlD,IAAA,QAAK8M,SAAS,CAAC,iBAAiB,CAAAhL,QAAA,cAC9B5B,KAAA,CAACrB,MAAM,EAAAiD,QAAA,eAEL9B,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,GAAG,CACRC,OAAO,cACLzN,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACX,IAAI,EACHmE,QAAQ,CAAE2D,gBAAiB,CAC3BrD,OAAO,CAAEA,OAAQ,CACjBC,UAAU,CAAEA,UAAW,CACvB2J,WAAW,CAAE7F,eAAgB,CAC7B8F,gBAAgB,CAAE5D,oBAAqB,CACvCO,YAAY,CAAEA,YAAa,CAC5B,CAAC,CACW,CAChB,CACF,CAAC,cAGFtK,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,qBAAqB,CAC1BC,OAAO,cACLzN,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACV,aAAa,EACZoO,WAAW,CAAE7F,eAAgB,CAC7B8F,gBAAgB,CAAE5D,oBAAqB,CACvCO,YAAY,CAAEA,YAAa,CAC5B,CAAC,CACW,CAChB,CACF,CAAC,cAGFtK,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,WAAW,CAChBC,OAAO,cACLzN,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACT,QAAQ,EACP+D,QAAQ,CAAEA,QAAS,CACnBoK,WAAW,CAAE7F,eAAgB,CAC7B8F,gBAAgB,CAAE5D,oBAAqB,CACvCO,YAAY,CAAEA,YAAa,CAC5B,CAAC,CACW,CAChB,CACF,CAAC,cAGFtK,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,QAAQ,CACbC,OAAO,cACLzN,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACP,KAAK,EAACmO,cAAc,CAAEnB,kBAAmB,CAAE,CAAC,CAChC,CAChB,CACF,CAAC,cAGFzM,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,WAAW,CAChBC,OAAO,cACLzN,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACH,QAAQ,EAACgO,iBAAiB,CAAElB,qBAAsB,CAAE,CAAC,CACzC,CAChB,CACF,CAAC,cAGF3M,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,UAAU,CACfC,OAAO,cACLzN,IAAA,CAACG,aAAa,EAAA2B,QAAA,CACXoB,WAAW,cACVlD,IAAA,CAACJ,OAAO,EAACsD,WAAW,CAAEA,WAAY,CAAC+J,QAAQ,CAAEL,YAAa,CAAE,CAAC,cAE7D1M,KAAA,QAAKgB,KAAK,CAAE,CAAEO,OAAO,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAI,QAAA,eACnD9B,IAAA,OAAA8B,QAAA,CAAI,8BAA4B,CAAI,CAAC,cACrC9B,IAAA,WACEwC,OAAO,CAAEA,CAAA,GAAMO,QAAQ,CAAC,aAAa,CAAE,CACvC7B,KAAK,CAAE,CACLM,UAAU,CAAE,SAAS,CACrBO,KAAK,CAAE,OAAO,CACdN,OAAO,CAAE,WAAW,CACpBI,MAAM,CAAE,MAAM,CACdF,YAAY,CAAE,KAAK,CACnBQ,MAAM,CAAE,SAAS,CACjB2L,SAAS,CAAE,MACb,CAAE,CAAAhM,QAAA,CACH,aAED,CAAQ,CAAC,EACN,CACN,CACY,CAChB,CACF,CAAC,cAGF9B,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,kBAAkB,CACvBC,OAAO,cACLzN,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACN,cAAc,GAAE,CAAC,CACL,CAChB,CACF,CAAC,cAGFM,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,uBAAuB,CAC5BC,OAAO,cACLzN,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACF,aAAa,GAAE,CAAC,CACJ,CAChB,CACF,CAAC,cAGFE,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,kBAAkB,CACvBC,OAAO,cACLzN,IAAA,CAACG,aAAa,EAAA2B,QAAA,cACZ9B,IAAA,CAACL,cAAc,GAAE,CAAC,CACL,CAChB,CACF,CAAC,cAGFK,IAAA,CAACpB,KAAK,EACJ4O,IAAI,CAAC,GAAG,CACRC,OAAO,cACLvN,KAAA,QAAKgB,KAAK,CAAE,CACVQ,SAAS,CAAE,QAAQ,CACnBD,OAAO,CAAE,WAAW,CACpBF,SAAS,CAAE,MAAM,CACjBJ,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAClB,CAAE,CAAAQ,QAAA,eACA9B,IAAA,OAAIkB,KAAK,CAAE,CAAEe,QAAQ,CAAE,MAAM,CAAEL,MAAM,CAAE,YAAY,CAAEG,KAAK,CAAE,SAAU,CAAE,CAAAD,QAAA,CAAC,KAAG,CAAI,CAAC,cACjF9B,IAAA,MAAGkB,KAAK,CAAE,CAAEe,QAAQ,CAAE,MAAM,CAAEF,KAAK,CAAE,SAAS,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,CAAC,gBAExE,CAAG,CAAC,cACJ9B,IAAA,WACEwC,OAAO,CAAEA,CAAA,GAAMO,QAAQ,CAAC,OAAO,CAAE,CACjC7B,KAAK,CAAE,CACLM,UAAU,CAAE,SAAS,CACrBO,KAAK,CAAE,OAAO,CACdN,OAAO,CAAE,WAAW,CACpBI,MAAM,CAAE,MAAM,CACdF,YAAY,CAAE,KAAK,CACnBQ,MAAM,CAAE,SAAS,CACjBF,QAAQ,CAAE,MAAM,CAChBG,UAAU,CAAE,KACd,CAAE,CAAAN,QAAA,CACH,sBAED,CAAQ,CAAC,EACN,CACN,CACF,CAAC,EACI,CAAC,CACN,CAAC,EACH,CAAC,CAEV,CAAC,CAGD,cAAe,CAAAgB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}