{"ast":null,"code":"import React from'react';import{useState,useEffect,useRef}from'react';import{RefreshCw,Bell}from'lucide-react';import'./CssPage/SellerHome.css';import Analytics from'./Analytics';import Ordernotification from'./Ordernotification';import Orderhistory from'./Orderhistory';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL='https://luxora-backend-sigma.vercel.app/api';const SellerHome=_ref=>{let{currentSeller}=_ref;const[products,setProducts]=useState([]);const[orders,setOrders]=useState([]);const[showNotifications,setShowNotifications]=useState(false);const[showOrderHistory,setShowOrderHistory]=useState(false);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[hasNewOrder,setHasNewOrder]=useState(false);const[unreadCount,setUnreadCount]=useState(0);const pollIntervalRef=useRef(null);const lastOrderCountRef=useRef(0);const clearedOrderIdsRef=useRef(new Set());// ‚úÖ Tracks permanently cleared orders\nconst lastFetchTimeRef=useRef(null);// ‚úÖ NEW: Track when orders were last cleared\nconst getToken=async()=>{try{var _window$storage,_window$storage$get;const result=await((_window$storage=window.storage)===null||_window$storage===void 0?void 0:(_window$storage$get=_window$storage.get)===null||_window$storage$get===void 0?void 0:_window$storage$get.call(_window$storage,'sellerToken'));return(result===null||result===void 0?void 0:result.value)||localStorage.getItem('sellerToken');}catch(_unused){return localStorage.getItem('sellerToken');}};const fetchProducts=async()=>{try{const token=await getToken();if(!token)return;const response=await fetch(\"\".concat(API_URL,\"/seller/auth/products\"),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok)throw new Error('Failed to fetch products');const data=await response.json();setProducts(data.products||[]);}catch(err){console.error('Error fetching products:',err);setError(err.message);}};const fetchOrders=async()=>{try{const token=await getToken();if(!token)return;const response=await fetch(\"\".concat(API_URL,\"/seller/auth/orders\"),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok)throw new Error('Failed to fetch orders');const data=await response.json();let newOrders=data.orders||[];// ‚úÖ UPDATED: Filter out cleared orders (permanent removal)\nnewOrders=newOrders.filter(order=>!clearedOrderIdsRef.current.has(order._id));// ‚úÖ NEW: Only show orders created AFTER the last clear time\nif(lastFetchTimeRef.current){newOrders=newOrders.filter(order=>{const orderTime=new Date(order.createdAt).getTime();return orderTime>lastFetchTimeRef.current;});}// Check if new orders came in\nif(newOrders.length>lastOrderCountRef.current){setHasNewOrder(true);setTimeout(()=>setHasNewOrder(false),3000);}lastOrderCountRef.current=newOrders.length;setOrders(newOrders);// Update unread count\nif(!showNotifications){setUnreadCount(newOrders.length);}}catch(err){console.error('Error fetching orders:',err);}};// ‚úÖ NEW: Handle notification button click\nconst handleNotificationClick=()=>{setShowNotifications(!showNotifications);if(!showNotifications){setUnreadCount(0);}};// ‚úÖ UPDATED: Clear all orders permanently\nconst handleClearAllOrders=()=>{try{console.log('[SELLERHOME] Clearing all orders permanently');// Add all current orders to cleared set (permanent)\norders.forEach(order=>clearedOrderIdsRef.current.add(order._id));// ‚úÖ NEW: Set the clear time - only show orders created AFTER this moment\nlastFetchTimeRef.current=new Date().getTime();setOrders([]);setUnreadCount(0);lastOrderCountRef.current=0;console.log('[SELLERHOME] All orders cleared permanently - only NEW orders will show');}catch(error){console.error('[SELLERHOME] Error clearing orders:',error);}};// ‚úÖ UPDATED: Delete single order permanently\nconst handleDeleteOrder=orderId=>{try{console.log('[SELLERHOME] Deleting order permanently:',orderId);// Add to cleared set (permanent)\nclearedOrderIdsRef.current.add(orderId);// Remove from display\nsetOrders(prevOrders=>prevOrders.filter(order=>order._id!==orderId));setUnreadCount(prev=>Math.max(0,prev-1));lastOrderCountRef.current=Math.max(0,lastOrderCountRef.current-1);console.log('[SELLERHOME] Order deleted permanently');}catch(error){console.error('[SELLERHOME] Error deleting order:',error);}};// ‚úÖ UPDATED: Refresh button now resets everything\nconst handleRefresh=async()=>{console.log('[SELLERHOME] Refreshing data - showing all orders again');clearedOrderIdsRef.current.clear();lastFetchTimeRef.current=null;await fetchProducts();await fetchOrders();};useEffect(()=>{const loadDashboard=async()=>{setLoading(true);await Promise.all([fetchProducts(),fetchOrders()]);setLoading(false);};loadDashboard();pollIntervalRef.current=setInterval(fetchOrders,5000);return()=>{if(pollIntervalRef.current)clearInterval(pollIntervalRef.current);};},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{padding:'2rem',textAlign:'center'},children:\"Loading dashboard...\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',position:'relative',background:'#f9fafb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'1.5rem 2rem',background:'white',borderBottom:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'1.5rem',fontWeight:'700',margin:0},children:\"Seller Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#6b7280',margin:'0.5rem 0 0 0',fontSize:'0.875rem'},children:[\"Welcome, \",(currentSeller===null||currentSeller===void 0?void 0:currentSeller.businessName)||'Seller',\"!\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleNotificationClick,style:{padding:'0.75rem 1.5rem',background:hasNewOrder||unreadCount>0?'#ef4444':'#f97316',color:'white',border:'none',borderRadius:'6px',fontWeight:'600',cursor:'pointer',display:'flex',alignItems:'center',gap:'0.5rem',transition:'all 0.2s',position:'relative'},onMouseEnter:e=>{e.target.style.background=hasNewOrder||unreadCount>0?'#dc2626':'#ea580c';e.target.style.transform='translateY(-2px)';e.target.style.boxShadow='0 4px 12px rgba(239, 68, 68, 0.3)';},onMouseLeave:e=>{e.target.style.background=hasNewOrder||unreadCount>0?'#ef4444':'#f97316';e.target.style.transform='translateY(0)';e.target.style.boxShadow='none';},title:\"View notifications\",children:[/*#__PURE__*/_jsx(Bell,{size:18}),\"Notifications\",unreadCount>0&&/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',top:'-8px',right:'-8px',background:'#fbbf24',color:'#78350f',borderRadius:'50%',width:'24px',height:'24px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'0.75rem',fontWeight:'700',border:'2px solid white'},children:unreadCount})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleRefresh,style:{padding:'0.75rem 1.5rem',background:'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontWeight:'600',cursor:'pointer',display:'flex',alignItems:'center',gap:'0.5rem',transition:'all 0.2s'},onMouseEnter:e=>{e.target.style.background='#2563eb';e.target.style.transform='translateY(-2px)';e.target.style.boxShadow='0 4px 12px rgba(59, 130, 246, 0.3)';},onMouseLeave:e=>{e.target.style.background='#3b82f6';e.target.style.transform='translateY(0)';e.target.style.boxShadow='none';},title:\"Refresh dashboard (shows all orders again)\",children:[/*#__PURE__*/_jsx(RefreshCw,{size:16}),\"Refresh\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowOrderHistory(true),style:{padding:'0.75rem 1.5rem',background:'#e5e7eb',border:'none',borderRadius:'6px',fontWeight:'600',cursor:'pointer',transition:'all 0.2s'},onMouseEnter:e=>{e.target.style.background='#d1d5db';e.target.style.transform='translateY(-2px)';e.target.style.boxShadow='0 4px 12px rgba(0, 0, 0, 0.1)';},onMouseLeave:e=>{e.target.style.background='#e5e7eb';e.target.style.transform='translateY(0)';e.target.style.boxShadow='none';},title:\"View order history\",children:[\"\\uD83D\\uDCCB History (\",orders.length,\")\"]})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'1rem 2rem',background:'#fee2e2',color:'#991b1b'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(Analytics,{products:products,confirmedOrders:orders})]}),showNotifications&&/*#__PURE__*/_jsx(Ordernotification,{orders:orders,hasNewOrder:hasNewOrder,onClose:()=>{setShowNotifications(false);setUnreadCount(0);},onClearAll:handleClearAllOrders,onDeleteOrder:handleDeleteOrder}),showOrderHistory&&/*#__PURE__*/_jsx(Orderhistory,{orders:orders,onClose:()=>setShowOrderHistory(false)})]});};export default SellerHome;","map":{"version":3,"names":["React","useState","useEffect","useRef","RefreshCw","Bell","Analytics","Ordernotification","Orderhistory","jsx","_jsx","jsxs","_jsxs","API_URL","SellerHome","_ref","currentSeller","products","setProducts","orders","setOrders","showNotifications","setShowNotifications","showOrderHistory","setShowOrderHistory","loading","setLoading","error","setError","hasNewOrder","setHasNewOrder","unreadCount","setUnreadCount","pollIntervalRef","lastOrderCountRef","clearedOrderIdsRef","Set","lastFetchTimeRef","getToken","_window$storage","_window$storage$get","result","window","storage","get","call","value","localStorage","getItem","_unused","fetchProducts","token","response","fetch","concat","headers","ok","Error","data","json","err","console","message","fetchOrders","newOrders","filter","order","current","has","_id","orderTime","Date","createdAt","getTime","length","setTimeout","handleNotificationClick","handleClearAllOrders","log","forEach","add","handleDeleteOrder","orderId","prevOrders","prev","Math","max","handleRefresh","clear","loadDashboard","Promise","all","setInterval","clearInterval","style","padding","textAlign","children","display","position","background","flex","justifyContent","alignItems","borderBottom","fontSize","fontWeight","margin","color","businessName","gap","onClick","border","borderRadius","cursor","transition","onMouseEnter","e","target","transform","boxShadow","onMouseLeave","title","size","top","right","width","height","confirmedOrders","onClose","onClearAll","onDeleteOrder"],"sources":["D:/Projects/luxora/luxora/Frontend/src/Seller/SellerHome.js"],"sourcesContent":["import React from 'react'\r\nimport { useState,useEffect,useRef} from 'react';\r\nimport {  RefreshCw,Bell } from 'lucide-react';\r\nimport './CssPage/SellerHome.css';\r\nimport Analytics from './Analytics';\r\nimport Ordernotification from './Ordernotification';\r\nimport Orderhistory from './Orderhistory';\r\n\r\n\r\nconst API_URL = 'https://luxora-backend-sigma.vercel.app/api';\r\n\r\n\r\nconst SellerHome = ({ currentSeller }) => {\r\n  const [products, setProducts] = useState([]);\r\n  const [orders, setOrders] = useState([]);\r\n  const [showNotifications, setShowNotifications] = useState(false);\r\n  const [showOrderHistory, setShowOrderHistory] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [hasNewOrder, setHasNewOrder] = useState(false);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  \r\n  const pollIntervalRef = useRef(null);\r\n  const lastOrderCountRef = useRef(0);\r\n  const clearedOrderIdsRef = useRef(new Set()); // ‚úÖ Tracks permanently cleared orders\r\n  const lastFetchTimeRef = useRef(null); // ‚úÖ NEW: Track when orders were last cleared\r\n\r\n  const getToken = async () => {\r\n    try {\r\n      const result = await window.storage?.get?.('sellerToken');\r\n      return result?.value || localStorage.getItem('sellerToken');\r\n    } catch {\r\n      return localStorage.getItem('sellerToken');\r\n    }\r\n  };\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const token = await getToken();\r\n      if (!token) return;\r\n\r\n      const response = await fetch(`${API_URL}/seller/auth/products`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Failed to fetch products');\r\n      const data = await response.json();\r\n      setProducts(data.products || []);\r\n    } catch (err) {\r\n      console.error('Error fetching products:', err);\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      const token = await getToken();\r\n      if (!token) return;\r\n\r\n      const response = await fetch(`${API_URL}/seller/auth/orders`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Failed to fetch orders');\r\n      const data = await response.json();\r\n      let newOrders = data.orders || [];\r\n\r\n      // ‚úÖ UPDATED: Filter out cleared orders (permanent removal)\r\n      newOrders = newOrders.filter(order => !clearedOrderIdsRef.current.has(order._id));\r\n\r\n      // ‚úÖ NEW: Only show orders created AFTER the last clear time\r\n      if (lastFetchTimeRef.current) {\r\n        newOrders = newOrders.filter(order => {\r\n          const orderTime = new Date(order.createdAt).getTime();\r\n          return orderTime > lastFetchTimeRef.current;\r\n        });\r\n      }\r\n\r\n      // Check if new orders came in\r\n      if (newOrders.length > lastOrderCountRef.current) {\r\n        setHasNewOrder(true);\r\n        setTimeout(() => setHasNewOrder(false), 3000);\r\n      }\r\n\r\n      lastOrderCountRef.current = newOrders.length;\r\n      setOrders(newOrders);\r\n      \r\n      // Update unread count\r\n      if (!showNotifications) {\r\n        setUnreadCount(newOrders.length);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching orders:', err);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ NEW: Handle notification button click\r\n  const handleNotificationClick = () => {\r\n    setShowNotifications(!showNotifications);\r\n    if (!showNotifications) {\r\n      setUnreadCount(0);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ UPDATED: Clear all orders permanently\r\n  const handleClearAllOrders = () => {\r\n    try {\r\n      console.log('[SELLERHOME] Clearing all orders permanently');\r\n      \r\n      // Add all current orders to cleared set (permanent)\r\n      orders.forEach(order => clearedOrderIdsRef.current.add(order._id));\r\n      \r\n      // ‚úÖ NEW: Set the clear time - only show orders created AFTER this moment\r\n      lastFetchTimeRef.current = new Date().getTime();\r\n      \r\n      setOrders([]);\r\n      setUnreadCount(0);\r\n      lastOrderCountRef.current = 0;\r\n      \r\n      console.log('[SELLERHOME] All orders cleared permanently - only NEW orders will show');\r\n    } catch (error) {\r\n      console.error('[SELLERHOME] Error clearing orders:', error);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ UPDATED: Delete single order permanently\r\n  const handleDeleteOrder = (orderId) => {\r\n    try {\r\n      console.log('[SELLERHOME] Deleting order permanently:', orderId);\r\n      \r\n      // Add to cleared set (permanent)\r\n      clearedOrderIdsRef.current.add(orderId);\r\n      \r\n      // Remove from display\r\n      setOrders(prevOrders => prevOrders.filter(order => order._id !== orderId));\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n      lastOrderCountRef.current = Math.max(0, lastOrderCountRef.current - 1);\r\n      \r\n      console.log('[SELLERHOME] Order deleted permanently');\r\n    } catch (error) {\r\n      console.error('[SELLERHOME] Error deleting order:', error);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ UPDATED: Refresh button now resets everything\r\n  const handleRefresh = async () => {\r\n    console.log('[SELLERHOME] Refreshing data - showing all orders again');\r\n    clearedOrderIdsRef.current.clear();\r\n    lastFetchTimeRef.current = null; \r\n    await fetchProducts();\r\n    await fetchOrders();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadDashboard = async () => {\r\n      setLoading(true);\r\n      await Promise.all([fetchProducts(), fetchOrders()]);\r\n      setLoading(false);\r\n    };\r\n\r\n    loadDashboard();\r\n    \r\n    pollIntervalRef.current = setInterval(fetchOrders, 5000);\r\n\r\n    return () => {\r\n      if (pollIntervalRef.current) clearInterval(pollIntervalRef.current);\r\n    };\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <div style={{ padding: '2rem', textAlign: 'center' }}>Loading dashboard...</div>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ display: 'flex', position: 'relative', background: '#f9fafb' }}>\r\n      <div style={{ flex: 1 }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '1.5rem 2rem', background: 'white', borderBottom: '1px solid #e5e7eb' }}>\r\n          <div>\r\n            <h1 style={{ fontSize: '1.5rem', fontWeight: '700', margin: 0 }}>Seller Dashboard</h1>\r\n            <p style={{ color: '#6b7280', margin: '0.5rem 0 0 0', fontSize: '0.875rem' }}>Welcome, {currentSeller?.businessName || 'Seller'}!</p>\r\n          </div>\r\n          <div style={{ display: 'flex', gap: '1rem' }}>\r\n            {/* ‚úÖ Notification Button */}\r\n            <button\r\n              onClick={handleNotificationClick}\r\n              style={{\r\n                padding: '0.75rem 1.5rem',\r\n                background: hasNewOrder || unreadCount > 0 ? '#ef4444' : '#f97316',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                transition: 'all 0.2s',\r\n                position: 'relative'\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                e.target.style.background = hasNewOrder || unreadCount > 0 ? '#dc2626' : '#ea580c';\r\n                e.target.style.transform = 'translateY(-2px)';\r\n                e.target.style.boxShadow = '0 4px 12px rgba(239, 68, 68, 0.3)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.target.style.background = hasNewOrder || unreadCount > 0 ? '#ef4444' : '#f97316';\r\n                e.target.style.transform = 'translateY(0)';\r\n                e.target.style.boxShadow = 'none';\r\n              }}\r\n              title=\"View notifications\"\r\n            >\r\n              <Bell size={18} />\r\n              Notifications\r\n              {unreadCount > 0 && (\r\n                <span style={{\r\n                  position: 'absolute',\r\n                  top: '-8px',\r\n                  right: '-8px',\r\n                  background: '#fbbf24',\r\n                  color: '#78350f',\r\n                  borderRadius: '50%',\r\n                  width: '24px',\r\n                  height: '24px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  fontSize: '0.75rem',\r\n                  fontWeight: '700',\r\n                  border: '2px solid white'\r\n                }}>\r\n                  {unreadCount}\r\n                </span>\r\n              )}\r\n            </button>\r\n\r\n            <button\r\n              onClick={handleRefresh}\r\n              style={{\r\n                padding: '0.75rem 1.5rem',\r\n                background: '#3b82f6',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                e.target.style.background = '#2563eb';\r\n                e.target.style.transform = 'translateY(-2px)';\r\n                e.target.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.3)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.target.style.background = '#3b82f6';\r\n                e.target.style.transform = 'translateY(0)';\r\n                e.target.style.boxShadow = 'none';\r\n              }}\r\n              title=\"Refresh dashboard (shows all orders again)\"\r\n            >\r\n              <RefreshCw size={16} />\r\n              Refresh\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => setShowOrderHistory(true)}\r\n              style={{\r\n                padding: '0.75rem 1.5rem',\r\n                background: '#e5e7eb',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                e.target.style.background = '#d1d5db';\r\n                e.target.style.transform = 'translateY(-2px)';\r\n                e.target.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.1)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.target.style.background = '#e5e7eb';\r\n                e.target.style.transform = 'translateY(0)';\r\n                e.target.style.boxShadow = 'none';\r\n              }}\r\n              title=\"View order history\"\r\n            >\r\n              üìã History ({orders.length})\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {error && (\r\n          <div style={{ padding: '1rem 2rem', background: '#fee2e2', color: '#991b1b' }}>\r\n            ‚ö†Ô∏è {error}\r\n          </div>\r\n        )}\r\n\r\n        <Analytics products={products} confirmedOrders={orders} />\r\n      </div>\r\n\r\n      {showNotifications && (\r\n        <Ordernotification\r\n          orders={orders}\r\n          hasNewOrder={hasNewOrder}\r\n          onClose={() => {\r\n            setShowNotifications(false);\r\n            setUnreadCount(0);\r\n          }}\r\n          onClearAll={handleClearAllOrders}\r\n          onDeleteOrder={handleDeleteOrder}\r\n        />\r\n      )}\r\n\r\n      {showOrderHistory && (\r\n        <Orderhistory\r\n          orders={orders}\r\n          onClose={() => setShowOrderHistory(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default SellerHome"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}