{"ast":null,"code":"import React from'react';import{ShoppingBag}from'lucide-react';import{authService}from'../Hooks/SellerApi';import{useCallback}from'react';import{useEffect}from'react';import{useState}from'react';import Analytics from'./Analytics';import SellerSettings from'./SellerSettings';import ProductList from'./ProductList';import ProductUpload from'./ProductUpload';import SellerHome from'./SellerHome';import SellerHeader from'./SellerHeader';import SellerRegister from'./SellerRegister';import Sellerlogin from'./Sellerlogin';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Seller=()=>{const[authState,setAuthState]=useState('loading');const[currentUser,setCurrentUser]=useState(null);const[currentPage,setCurrentPage]=useState('dashboard');const[token,setToken]=useState(null);const[products,setProducts]=useState([]);const fetchSellerProducts=useCallback(async sellerId=>{try{console.log('[SELLER] Fetching products for seller:',sellerId);const{getSellerProducts}=await import('../Hooks/SellerApi');const response=await getSellerProducts();console.log('[SELLER] Products fetched:',response.length);setProducts(response||[]);}catch(error){console.error('[SELLER] Failed to fetch products:',error);setProducts([]);}},[]);const checkAuth=useCallback(async()=>{try{console.log('[SELLER] Checking authentication...');const user=await authService.getCurrentUser();if(user){console.log('[SELLER] User authenticated:',user.email);setCurrentUser(user);setAuthState('authenticated');// Fetch products for this seller\nawait fetchSellerProducts(user._id);}else{console.log('[SELLER] No authenticated user found');setAuthState('login');}}catch(error){console.error('[SELLER] Auth check failed:',error);setAuthState('login');}},[fetchSellerProducts]);// Check authentication on mount\nuseEffect(()=>{checkAuth();},[checkAuth]);const handleLogin=useCallback((user,loginToken)=>{console.log('[SELLER] Login successful:',user.email);setCurrentUser(user);setToken(loginToken);setAuthState('authenticated');setCurrentPage('dashboard');fetchSellerProducts(user._id);},[fetchSellerProducts]);const handleRegister=useCallback((user,registerToken)=>{console.log('[SELLER] Registration successful:',user.email);setCurrentUser(user);setToken(registerToken);setAuthState('authenticated');setCurrentPage('dashboard');fetchSellerProducts(user._id);},[fetchSellerProducts]);const handleLogout=useCallback(async()=>{try{console.log('[SELLER] Logging out...');await authService.logout();}catch(error){console.error('[SELLER] Logout error:',error);}setCurrentUser(null);setToken(null);setProducts([]);setAuthState('login');setCurrentPage('dashboard');},[]);// Loading Screen\nif(authState==='loading'){return/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center',background:'linear-gradient(135deg, #059669 0%, #047857 50%, #065f46 100%)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',color:'white'},children:[/*#__PURE__*/_jsx(ShoppingBag,{size:48,style:{marginBottom:'1rem'}}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'1.25rem'},children:\"Loading...\"})]})});}// Login Screen\nif(authState==='login'){return/*#__PURE__*/_jsx(Sellerlogin,{onLogin:handleLogin,onSwitchToRegister:()=>setAuthState('register')});}// Register Screen\nif(authState==='register'){return/*#__PURE__*/_jsx(SellerRegister,{onRegister:handleRegister,onSwitchToLogin:()=>setAuthState('login')});}// Main Dashboard\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',background:'#f3f4f6'},children:[/*#__PURE__*/_jsx(SellerHeader,{currentPage:currentPage,setCurrentPage:setCurrentPage,currentSeller:currentUser,onLogout:handleLogout}),currentPage==='dashboard'&&/*#__PURE__*/_jsx(SellerHome,{currentSeller:currentUser}),currentPage==='upload'&&/*#__PURE__*/_jsx(ProductUpload,{currentSeller:currentUser,authToken:token,onProductAdded:()=>{if(currentUser){fetchSellerProducts(currentUser._id);}}}),currentPage==='products'&&/*#__PURE__*/_jsx(ProductList,{products:products}),currentPage==='analytics'&&/*#__PURE__*/_jsx(Analytics,{products:products}),currentPage==='settings'&&/*#__PURE__*/_jsx(SellerSettings,{currentSeller:currentUser,onUpdate:updatedSeller=>{console.log('[SELLER] Updating seller:',updatedSeller);setCurrentUser(updatedSeller);}})]})});};export default Seller;","map":{"version":3,"names":["React","ShoppingBag","authService","useCallback","useEffect","useState","Analytics","SellerSettings","ProductList","ProductUpload","SellerHome","SellerHeader","SellerRegister","Sellerlogin","jsx","_jsx","jsxs","_jsxs","Seller","authState","setAuthState","currentUser","setCurrentUser","currentPage","setCurrentPage","token","setToken","products","setProducts","fetchSellerProducts","sellerId","console","log","getSellerProducts","response","length","error","checkAuth","user","getCurrentUser","email","_id","handleLogin","loginToken","handleRegister","registerToken","handleLogout","logout","style","minHeight","display","alignItems","justifyContent","background","children","textAlign","color","size","marginBottom","fontSize","onLogin","onSwitchToRegister","onRegister","onSwitchToLogin","currentSeller","onLogout","authToken","onProductAdded","onUpdate","updatedSeller"],"sources":["D:/Projects/luxora/luxora/Frontend/src/Seller/Seller.js"],"sourcesContent":["import React from 'react'\r\nimport { ShoppingBag } from 'lucide-react';\r\nimport { authService } from '../Hooks/SellerApi';\r\nimport { useCallback } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport Analytics from './Analytics';\r\nimport SellerSettings from './SellerSettings';\r\nimport ProductList from './ProductList';\r\nimport ProductUpload from './ProductUpload';\r\nimport SellerHome from './SellerHome';\r\nimport SellerHeader from './SellerHeader';\r\nimport SellerRegister from './SellerRegister';\r\nimport Sellerlogin from './Sellerlogin';\r\n\r\nconst Seller = () => {\r\n  const [authState, setAuthState] = useState('loading');\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState('dashboard');\r\n  const [token, setToken] = useState(null);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const fetchSellerProducts = useCallback(async (sellerId) => {\r\n    try {\r\n      console.log('[SELLER] Fetching products for seller:', sellerId);\r\n      const { getSellerProducts } = await import('../Hooks/SellerApi');\r\n      const response = await getSellerProducts();\r\n      console.log('[SELLER] Products fetched:', response.length);\r\n      setProducts(response || []);\r\n    } catch (error) {\r\n      console.error('[SELLER] Failed to fetch products:', error);\r\n      setProducts([]);\r\n    }\r\n  }, []);\r\n\r\n  const checkAuth = useCallback(async () => {\r\n    try {\r\n      console.log('[SELLER] Checking authentication...');\r\n      const user = await authService.getCurrentUser();\r\n      \r\n      if (user) {\r\n        console.log('[SELLER] User authenticated:', user.email);\r\n        setCurrentUser(user);\r\n        setAuthState('authenticated');\r\n        // Fetch products for this seller\r\n        await fetchSellerProducts(user._id);\r\n      } else {\r\n        console.log('[SELLER] No authenticated user found');\r\n        setAuthState('login');\r\n      }\r\n    } catch (error) {\r\n      console.error('[SELLER] Auth check failed:', error);\r\n      setAuthState('login');\r\n    }\r\n  }, [fetchSellerProducts]);\r\n\r\n  // Check authentication on mount\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, [checkAuth]);\r\n\r\n  const handleLogin = useCallback((user, loginToken) => {\r\n    console.log('[SELLER] Login successful:', user.email);\r\n    setCurrentUser(user);\r\n    setToken(loginToken);\r\n    setAuthState('authenticated');\r\n    setCurrentPage('dashboard');\r\n    fetchSellerProducts(user._id);\r\n  }, [fetchSellerProducts]);\r\n\r\n  const handleRegister = useCallback((user, registerToken) => {\r\n    console.log('[SELLER] Registration successful:', user.email);\r\n    setCurrentUser(user);\r\n    setToken(registerToken);\r\n    setAuthState('authenticated');\r\n    setCurrentPage('dashboard');\r\n    fetchSellerProducts(user._id);\r\n  }, [fetchSellerProducts]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    try {\r\n      console.log('[SELLER] Logging out...');\r\n      await authService.logout();\r\n    } catch (error) {\r\n      console.error('[SELLER] Logout error:', error);\r\n    }\r\n    setCurrentUser(null);\r\n    setToken(null);\r\n    setProducts([]);\r\n    setAuthState('login');\r\n    setCurrentPage('dashboard');\r\n  }, []);\r\n\r\n  // Loading Screen\r\n  if (authState === 'loading') {\r\n    return (\r\n      <div style={{ \r\n        minHeight: '100vh', \r\n        display: 'flex', \r\n        alignItems: 'center', \r\n        justifyContent: 'center', \r\n        background: 'linear-gradient(135deg, #059669 0%, #047857 50%, #065f46 100%)' \r\n      }}>\r\n        <div style={{ textAlign: 'center', color: 'white' }}>\r\n          <ShoppingBag size={48} style={{ marginBottom: '1rem' }} />\r\n          <p style={{ fontSize: '1.25rem' }}>Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Login Screen\r\n  if (authState === 'login') {\r\n    return (\r\n      <Sellerlogin\r\n        onLogin={handleLogin} \r\n        onSwitchToRegister={() => setAuthState('register')} \r\n      />\r\n    );\r\n  }\r\n\r\n  // Register Screen\r\n  if (authState === 'register') {\r\n    return (\r\n      <SellerRegister \r\n        onRegister={handleRegister} \r\n        onSwitchToLogin={() => setAuthState('login')} \r\n      />\r\n    );\r\n  }\r\n\r\n  // Main Dashboard\r\n  return (\r\n    <div>\r\n      <div style={{ minHeight: '100vh', background: '#f3f4f6' }}>\r\n        {/* Header Navigation */}\r\n        <SellerHeader\r\n          currentPage={currentPage}\r\n          setCurrentPage={setCurrentPage}\r\n          currentSeller={currentUser}\r\n          onLogout={handleLogout}\r\n        />\r\n\r\n        {/* Page Content */}\r\n        {currentPage === 'dashboard' && (\r\n          <SellerHome currentSeller={currentUser} />\r\n        )}\r\n        \r\n        {currentPage === 'upload' && (\r\n          <ProductUpload\r\n            currentSeller={currentUser}\r\n            authToken={token}\r\n            onProductAdded={() => {\r\n              if (currentUser) {\r\n                fetchSellerProducts(currentUser._id);\r\n              }\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {currentPage === 'products' && (\r\n          <ProductList products={products} />\r\n        )}\r\n        \r\n        {currentPage === 'analytics' && (\r\n          <Analytics products={products} />\r\n        )}\r\n        \r\n        {currentPage === 'settings' && (\r\n          <SellerSettings\r\n            currentSeller={currentUser}\r\n            onUpdate={(updatedSeller) => {\r\n              console.log('[SELLER] Updating seller:', updatedSeller);\r\n              setCurrentUser(updatedSeller);\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Seller"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}